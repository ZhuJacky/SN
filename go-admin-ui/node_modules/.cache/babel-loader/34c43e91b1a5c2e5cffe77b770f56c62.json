{"remainingRequest":"D:\\project\\SN\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\project\\SN\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\SN\\go-admin-ui\\src\\views\\schedule\\log.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\SN\\go-admin-ui\\src\\views\\schedule\\log.vue","mtime":1656928972301},{"path":"D:\\project\\SN\\go-admin-ui\\babel.config.js","mtime":1656928972012},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1656929009473},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1656929012008}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgdW5Xc0xvZ291dCB9IGZyb20gJ0AvYXBpL3dzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTeXNKb2JMb2dNYW5hZ2UnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB3ZWJzb2NrOiBudWxsLAogICAgICBhcnJzOiBbXSwKICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgZ3JvdXA6IHVuZGVmaW5lZAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmlkID0gdGhpcy5ndWlkKCk7CiAgICB0aGlzLmdyb3VwID0gJ2xvZyc7CiAgICB0aGlzLmluaXRXZWJTb2NrZXQoKTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgY29uc29sZS5sb2coJ+aWreW8gHdlYnNvY2tldOi/nuaOpScpOwogICAgdGhpcy53ZWJzb2NrLmNsb3NlKCk7IC8vIOemu+W8gOi3r+eUseS5i+WQjuaWreW8gHdlYnNvY2tldOi/nuaOpQoKICAgIHVuV3NMb2dvdXQodGhpcy5pZCwgdGhpcy5ncm91cCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXRXZWJTb2NrZXQ6IGZ1bmN0aW9uIGluaXRXZWJTb2NrZXQoKSB7CiAgICAgIC8vIOWIneWni+WMlndlb3NvY2tldAogICAgICBjb25zb2xlLmxvZyh0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnRva2VuKTsKICAgICAgdmFyIHdzdXJpID0gJ3dzOi8vMTI3LjAuMC4xOjgwMDAvd3MvJyArIHRoaXMuaWQgKyAnLycgKyB0aGlzLmdyb3VwICsgJz90b2tlbj0nICsgdGhpcy4kc3RvcmUuc3RhdGUudXNlci50b2tlbjsKICAgICAgdGhpcy53ZWJzb2NrID0gbmV3IFdlYlNvY2tldCh3c3VyaSk7CiAgICAgIHRoaXMud2Vic29jay5vbm1lc3NhZ2UgPSB0aGlzLndlYnNvY2tldG9ubWVzc2FnZTsKICAgICAgdGhpcy53ZWJzb2NrLm9ub3BlbiA9IHRoaXMud2Vic29ja2V0b25vcGVuOwogICAgICB0aGlzLndlYnNvY2sub25lcnJvciA9IHRoaXMud2Vic29ja2V0b25lcnJvcjsKICAgICAgdGhpcy53ZWJzb2NrLm9uY2xvc2UgPSB0aGlzLndlYnNvY2tldGNsb3NlOwogICAgfSwKICAgIHdlYnNvY2tldG9ub3BlbjogZnVuY3Rpb24gd2Vic29ja2V0b25vcGVuKCkgewogICAgICAvLyDov57mjqXlu7rnq4vkuYvlkI7miafooYxzZW5k5pa55rOV5Y+R6YCB5pWw5o2uCiAgICAgIGNvbnNvbGUubG9nKCfov57mjqXmiZPlvIAnKTsgLy8gICBjb25zdCBhY3Rpb25zID0geyAndGVzdCc6ICcxMjM0NScgfQogICAgICAvLyAgIHRoaXMud2Vic29ja2V0c2VuZChKU09OLnN0cmluZ2lmeShhY3Rpb25zKSkKICAgIH0sCiAgICB3ZWJzb2NrZXRvbmVycm9yOiBmdW5jdGlvbiB3ZWJzb2NrZXRvbmVycm9yKCkgewogICAgICAvLyDov57mjqXlu7rnq4vlpLHotKXph43ov54KICAgICAgdGhpcy5pbml0V2ViU29ja2V0KCk7CiAgICB9LAogICAgd2Vic29ja2V0b25tZXNzYWdlOiBmdW5jdGlvbiB3ZWJzb2NrZXRvbm1lc3NhZ2UoZSkgewogICAgICAvLyDmlbDmja7mjqXmlLYKICAgICAgY29uc29sZS5sb2coZS5kYXRhKTsgLy8gICBjb25zb2xlLmxvZyh0aGlzLmJpbmFyeUFnZW50KGUpKQogICAgICAvLyAgIGNvbnN0IHJlZGF0YSA9IEpTT04ucGFyc2UoZS5kYXRhKQogICAgICAvLyAgIGNvbnNvbGUubG9nKHJlZGF0YSkKICAgICAgLy8gICB0aGlzLiRyZWZzLmxvZy5pbm5lclRleHQgPSBlLmRhdGEgKyAnXG4nICsgdGhpcy4kcmVmcy5sb2cuaW5uZXJUZXh0CgogICAgICB0aGlzLmFycnMudW5zaGlmdChlLmRhdGEpOwogICAgfSwKICAgIHdlYnNvY2tldHNlbmQ6IGZ1bmN0aW9uIHdlYnNvY2tldHNlbmQoRGF0YSkgey8vIOaVsOaNruWPkemAgQogICAgICAvLyAgIHRoaXMud2Vic29jay5zZW5kKERhdGEpCiAgICB9LAogICAgd2Vic29ja2V0Y2xvc2U6IGZ1bmN0aW9uIHdlYnNvY2tldGNsb3NlKGUpIHsKICAgICAgLy8g5YWz6ZetCiAgICAgIHVuV3NMb2dvdXQodGhpcy5pZCwgdGhpcy5ncm91cCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKCfmlq3lvIDov57mjqUnLCBlKTsKICAgIH0sCiAgICBndWlkOiBmdW5jdGlvbiBndWlkKCkgewogICAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykgewogICAgICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMDsKICAgICAgICB2YXIgdiA9IGMgPT09ICd4JyA/IHIgOiByICYgMHgzIHwgMHg4OwogICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["log.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,SAAA,UAAA,QAAA,UAAA;AACA,eAAA;EACA,IAAA,EAAA,iBADA;EAEA,IAFA,kBAEA;IACA,OAAA;MACA,OAAA,EAAA,IADA;MAEA,IAAA,EAAA,EAFA;MAGA,EAAA,EAAA,SAHA;MAIA,KAAA,EAAA;IAJA,CAAA;EAMA,CATA;EAUA,OAVA,qBAUA;IACA,KAAA,EAAA,GAAA,KAAA,IAAA,EAAA;IACA,KAAA,KAAA,GAAA,KAAA;IACA,KAAA,aAAA;EACA,CAdA;EAeA,SAfA,uBAeA;IACA,OAAA,CAAA,GAAA,CAAA,eAAA;IACA,KAAA,OAAA,CAAA,KAAA,GAFA,CAEA;;IACA,UAAA,CAAA,KAAA,EAAA,EAAA,KAAA,KAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;MACA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;IACA,CAFA;EAIA,CAtBA;EAuBA,OAAA,EAAA;IACA,aADA,2BACA;MAAA;MACA,OAAA,CAAA,GAAA,CAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,KAAA;MACA,IAAA,KAAA,GAAA,4BAAA,KAAA,EAAA,GAAA,GAAA,GAAA,KAAA,KAAA,GAAA,SAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,KAAA;MACA,KAAA,OAAA,GAAA,IAAA,SAAA,CAAA,KAAA,CAAA;MACA,KAAA,OAAA,CAAA,SAAA,GAAA,KAAA,kBAAA;MACA,KAAA,OAAA,CAAA,MAAA,GAAA,KAAA,eAAA;MACA,KAAA,OAAA,CAAA,OAAA,GAAA,KAAA,gBAAA;MACA,KAAA,OAAA,CAAA,OAAA,GAAA,KAAA,cAAA;IACA,CATA;IAUA,eAVA,6BAUA;MAAA;MACA,OAAA,CAAA,GAAA,CAAA,MAAA,EADA,CAEA;MACA;IACA,CAdA;IAeA,gBAfA,8BAeA;MAAA;MACA,KAAA,aAAA;IACA,CAjBA;IAkBA,kBAlBA,8BAkBA,CAlBA,EAkBA;MAAA;MACA,OAAA,CAAA,GAAA,CAAA,CAAA,CAAA,IAAA,EADA,CAEA;MACA;MACA;MACA;;MACA,KAAA,IAAA,CAAA,OAAA,CAAA,CAAA,CAAA,IAAA;IACA,CAzBA;IA0BA,aA1BA,yBA0BA,IA1BA,EA0BA,CAAA;MACA;IACA,CA5BA;IA6BA,cA7BA,0BA6BA,CA7BA,EA6BA;MAAA;MACA,UAAA,CAAA,KAAA,EAAA,EAAA,KAAA,KAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;QACA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;MACA,CAFA;MAIA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,CAAA;IACA,CAnCA;IAoCA,IApCA,kBAoCA;MACA,OAAA,uCAAA,OAAA,CAAA,OAAA,EAAA,UAAA,CAAA,EAAA;QACA,IAAA,CAAA,GAAA,IAAA,CAAA,MAAA,KAAA,EAAA,GAAA,CAAA;QAAA,IAAA,CAAA,GAAA,CAAA,KAAA,GAAA,GAAA,CAAA,GAAA,CAAA,GAAA,GAAA,GAAA,GAAA;QACA,OAAA,CAAA,CAAA,QAAA,CAAA,EAAA,CAAA;MACA,CAHA,CAAA;IAIA;EAzCA;AAvBA,CAAA","sourcesContent":["\r\n<template>\r\n  <BasicLayout>\r\n    <template #wrapper>\r\n      <el-card class=\"box-card\">\r\n        <el-form>\r\n          <el-form-item>\r\n            <el-button type=\"success\" icon=\"el-icon-search\" size=\"mini\">状态</el-button>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\">清空</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n        <el-row ref=\"log\" :gutter=\"10\" class=\"mb8\">\r\n          <el-scrollbar style=\"height:500px;background-color: black;color: cornflowerblue;\">\r\n            <ul\r\n              style=\"line-height: 25px;padding-top: 15px;padding-bottom: 15px;min-height: 500px; margin: 0;list-style-type: none;\"\r\n            >\r\n              <li v-for=\"(item,index) in arrs\" :key=\"index\">\r\n\r\n                {{ item }}\r\n              </li>\r\n            </ul>\r\n          </el-scrollbar>\r\n        </el-row>\r\n      </el-card>\r\n    </template>\r\n  </BasicLayout>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport { unWsLogout } from '@/api/ws'\r\nexport default {\r\n  name: 'SysJobLogManage',\r\n  data() {\r\n    return {\r\n      websock: null,\r\n      arrs: [],\r\n      id: undefined,\r\n      group: undefined\r\n    }\r\n  },\r\n  created() {\r\n    this.id = this.guid()\r\n    this.group = 'log'\r\n    this.initWebSocket()\r\n  },\r\n  destroyed() {\r\n    console.log('断开websocket连接')\r\n    this.websock.close() // 离开路由之后断开websocket连接\r\n    unWsLogout(this.id, this.group).then(response => {\r\n      console.log(response.data)\r\n    }\r\n    )\r\n  },\r\n  methods: {\r\n    initWebSocket() { // 初始化weosocket\r\n      console.log(this.$store.state.user.token)\r\n      const wsuri = 'ws://127.0.0.1:8000/ws/' + this.id + '/' + this.group + '?token=' + this.$store.state.user.token\r\n      this.websock = new WebSocket(wsuri)\r\n      this.websock.onmessage = this.websocketonmessage\r\n      this.websock.onopen = this.websocketonopen\r\n      this.websock.onerror = this.websocketonerror\r\n      this.websock.onclose = this.websocketclose\r\n    },\r\n    websocketonopen() { // 连接建立之后执行send方法发送数据\r\n      console.log('连接打开')\r\n    //   const actions = { 'test': '12345' }\r\n    //   this.websocketsend(JSON.stringify(actions))\r\n    },\r\n    websocketonerror() { // 连接建立失败重连\r\n      this.initWebSocket()\r\n    },\r\n    websocketonmessage(e) { // 数据接收\r\n      console.log(e.data)\r\n      //   console.log(this.binaryAgent(e))\r\n      //   const redata = JSON.parse(e.data)\r\n      //   console.log(redata)\r\n      //   this.$refs.log.innerText = e.data + '\\n' + this.$refs.log.innerText\r\n      this.arrs.unshift(e.data)\r\n    },\r\n    websocketsend(Data) { // 数据发送\r\n    //   this.websock.send(Data)\r\n    },\r\n    websocketclose(e) { // 关闭\r\n      unWsLogout(this.id, this.group).then(response => {\r\n        console.log(response.data)\r\n      }\r\n      )\r\n      console.log('断开连接', e)\r\n    },\r\n    guid() {\r\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = Math.random() * 16 | 0; var v = c === 'x' ? r : (r & 0x3 | 0x8)\r\n        return v.toString(16)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n"],"sourceRoot":"src/views/schedule"}]}