{"remainingRequest":"D:\\project\\SN\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\SN\\go-admin-ui\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\project\\SN\\go-admin-ui\\src\\utils\\zipdownload.js","dependencies":[{"path":"D:\\project\\SN\\go-admin-ui\\src\\utils\\zipdownload.js","mtime":1656928972263},{"path":"D:\\project\\SN\\go-admin-ui\\babel.config.js","mtime":1656928972012},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1656929009473},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\eslint-loader\\index.js","mtime":1656929010107}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmRvdC1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5zdGlja3kuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CnZhciBtaW1lTWFwID0gewogIHhsc3g6ICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldCcsCiAgemlwOiAnYXBwbGljYXRpb24vemlwJwp9Owp2YXIgYmFzZVVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEk7CmV4cG9ydCBmdW5jdGlvbiBkb3duTG9hZFppcChzdHIsIGZpbGVuYW1lKSB7CiAgdmFyIHVybCA9IGJhc2VVcmwgKyBzdHI7CiAgYXhpb3MoewogICAgbWV0aG9kOiAnZ2V0JywKICAgIHVybDogdXJsLAogICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICBoZWFkZXJzOiB7CiAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgZ2V0VG9rZW4oKQogICAgfQogIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgcmVzb2x2ZUJsb2IocmVzLCBtaW1lTWFwLnppcCk7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGRvd25Mb2FkRmlsZShzdHIpIHsKICB2YXIgdXJsID0gYmFzZVVybCArIHN0cjsKICB2YXIgYUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgYUxpbmsuaHJlZiA9IHVybDsKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFMaW5rKTsKICBhTGluay5jbGljaygpOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYUxpbmspOwp9Ci8qKg0KICog6Kej5p6QYmxvYuWTjeW6lOWGheWuueW5tuS4i+i9vQ0KICogQHBhcmFtIHsqfSByZXMgYmxvYuWTjeW6lOWGheWuuQ0KICogQHBhcmFtIHtTdHJpbmd9IG1pbWVUeXBlIE1JTUXnsbvlnosNCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVCbG9iKHJlcywgbWltZVR5cGUpIHsKICB2YXIgYUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdLCB7CiAgICB0eXBlOiBtaW1lVHlwZQogIH0pOyAvLyAvL+S7jnJlc3BvbnNl55qEaGVhZGVyc+S4reiOt+WPlmZpbGVuYW1lLCDlkI7nq69yZXNwb25zZS5zZXRIZWFkZXIoIkNvbnRlbnQtZGlzcG9zaXRpb24iLCAiYXR0YWNobWVudDsgZmlsZW5hbWU9eHh4eC5kb2N4Iikg6K6+572u55qE5paH5Lu25ZCNOwoKICB2YXIgcGF0dCA9IG5ldyBSZWdFeHAoJ2ZpbGVuYW1lPShbXjtdK1xcLlteXFwuO10rKTsqJyk7CiAgdmFyIGNvbnRlbnREaXNwb3NpdGlvbiA9IGRlY29kZVVSSShyZXMuaGVhZGVyc1snY29udGVudC1kaXNwb3NpdGlvbiddKTsKICB2YXIgcmVzdWx0ID0gcGF0dC5leGVjKGNvbnRlbnREaXNwb3NpdGlvbik7CiAgdmFyIGZpbGVOYW1lID0gcmVzdWx0WzFdOwogIGZpbGVOYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXCIvZywgJycpOwogIGFMaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogIGFMaW5rLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCBmaWxlTmFtZSk7IC8vIOiuvue9ruS4i+i9veaWh+S7tuWQjeensAoKICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGFMaW5rKTsKICBhTGluay5jbGljaygpOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYUxpbmspOwp9"},{"version":3,"names":["axios","getToken","mimeMap","xlsx","zip","baseUrl","process","env","VUE_APP_BASE_API","downLoadZip","str","filename","url","method","responseType","headers","then","res","resolveBlob","downLoadFile","aLink","document","createElement","href","body","appendChild","click","mimeType","blob","Blob","data","type","patt","RegExp","contentDisposition","decodeURI","result","exec","fileName","replace","URL","createObjectURL","setAttribute"],"sources":["D:/project/SN/go-admin-ui/src/utils/zipdownload.js"],"sourcesContent":["import axios from 'axios'\r\nimport { getToken } from '@/utils/auth'\r\n\r\nconst mimeMap = {\r\n  xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n  zip: 'application/zip'\r\n}\r\n\r\nconst baseUrl = process.env.VUE_APP_BASE_API\r\nexport function downLoadZip(str, filename) {\r\n  var url = baseUrl + str\r\n  axios({\r\n    method: 'get',\r\n    url: url,\r\n    responseType: 'blob',\r\n    headers: { 'Authorization': 'Bearer ' + getToken() }\r\n  }).then(res => {\r\n    resolveBlob(res, mimeMap.zip)\r\n  })\r\n}\r\n\r\nexport function downLoadFile(str) {\r\n  var url = baseUrl + str\r\n  const aLink = document.createElement('a')\r\n  aLink.href = url\r\n  document.body.appendChild(aLink)\r\n  aLink.click()\r\n  document.body.appendChild(aLink)\r\n}\r\n/**\r\n * 解析blob响应内容并下载\r\n * @param {*} res blob响应内容\r\n * @param {String} mimeType MIME类型\r\n */\r\nexport function resolveBlob(res, mimeType) {\r\n  const aLink = document.createElement('a')\r\n  var blob = new Blob([res.data], { type: mimeType })\r\n  // //从response的headers中获取filename, 后端response.setHeader(\"Content-disposition\", \"attachment; filename=xxxx.docx\") 设置的文件名;\r\n  var patt = new RegExp('filename=([^;]+\\\\.[^\\\\.;]+);*')\r\n  var contentDisposition = decodeURI(res.headers['content-disposition'])\r\n  var result = patt.exec(contentDisposition)\r\n  var fileName = result[1]\r\n  fileName = fileName.replace(/\\\"/g, '')\r\n  aLink.href = URL.createObjectURL(blob)\r\n  aLink.setAttribute('download', fileName) // 设置下载文件名称\r\n  document.body.appendChild(aLink)\r\n  aLink.click()\r\n  document.body.appendChild(aLink)\r\n}\r\n"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;AAEA,IAAMC,OAAO,GAAG;EACdC,IAAI,EAAE,mEADQ;EAEdC,GAAG,EAAE;AAFS,CAAhB;AAKA,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B;AACA,OAAO,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,QAA1B,EAAoC;EACzC,IAAIC,GAAG,GAAGP,OAAO,GAAGK,GAApB;EACAV,KAAK,CAAC;IACJa,MAAM,EAAE,KADJ;IAEJD,GAAG,EAAEA,GAFD;IAGJE,YAAY,EAAE,MAHV;IAIJC,OAAO,EAAE;MAAE,iBAAiB,YAAYd,QAAQ;IAAvC;EAJL,CAAD,CAAL,CAKGe,IALH,CAKQ,UAAAC,GAAG,EAAI;IACbC,WAAW,CAACD,GAAD,EAAMf,OAAO,CAACE,GAAd,CAAX;EACD,CAPD;AAQD;AAED,OAAO,SAASe,YAAT,CAAsBT,GAAtB,EAA2B;EAChC,IAAIE,GAAG,GAAGP,OAAO,GAAGK,GAApB;EACA,IAAMU,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAd;EACAF,KAAK,CAACG,IAAN,GAAaX,GAAb;EACAS,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BL,KAA1B;EACAA,KAAK,CAACM,KAAN;EACAL,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BL,KAA1B;AACD;AACD;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASF,WAAT,CAAqBD,GAArB,EAA0BU,QAA1B,EAAoC;EACzC,IAAMP,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAd;EACA,IAAIM,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACZ,GAAG,CAACa,IAAL,CAAT,EAAqB;IAAEC,IAAI,EAAEJ;EAAR,CAArB,CAAX,CAFyC,CAGzC;;EACA,IAAIK,IAAI,GAAG,IAAIC,MAAJ,CAAW,+BAAX,CAAX;EACA,IAAIC,kBAAkB,GAAGC,SAAS,CAAClB,GAAG,CAACF,OAAJ,CAAY,qBAAZ,CAAD,CAAlC;EACA,IAAIqB,MAAM,GAAGJ,IAAI,CAACK,IAAL,CAAUH,kBAAV,CAAb;EACA,IAAII,QAAQ,GAAGF,MAAM,CAAC,CAAD,CAArB;EACAE,QAAQ,GAAGA,QAAQ,CAACC,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,CAAX;EACAnB,KAAK,CAACG,IAAN,GAAaiB,GAAG,CAACC,eAAJ,CAAoBb,IAApB,CAAb;EACAR,KAAK,CAACsB,YAAN,CAAmB,UAAnB,EAA+BJ,QAA/B,EAVyC,CAUA;;EACzCjB,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BL,KAA1B;EACAA,KAAK,CAACM,KAAN;EACAL,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BL,KAA1B;AACD"}]}