{"remainingRequest":"D:\\project\\SN\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\project\\SN\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\SN\\go-admin-ui\\src\\components\\TopNav\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\SN\\go-admin-ui\\src\\components\\TopNav\\index.vue","mtime":1656928972151},{"path":"D:\\project\\SN\\go-admin-ui\\babel.config.js","mtime":1656928972012},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1656929009473},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1656929012008}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovcHJvamVjdC9TTi9nby1hZG1pbi11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBjb25zdGFudFJvdXRlcyB9IGZyb20gJ0Avcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDpobbpg6jmoI/liJ3lp4vmlbAKICAgICAgdmlzaWJsZU51bWJlcjogNSwKICAgICAgLy8g5piv5ZCm5Li66aaW5qyh5Yqg6L29CiAgICAgIGlzRnJpc3Q6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOmhtumDqOaYvuekuuiPnOWNlQogICAgdG9wTWVudXM6IGZ1bmN0aW9uIHRvcE1lbnVzKCkgewogICAgICByZXR1cm4gdGhpcy5yb3V0ZXJzLm1hcChmdW5jdGlvbiAobWVudSkgewogICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1lbnUpLCB7fSwgewogICAgICAgICAgY2hpbGRyZW46IHVuZGVmaW5lZAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmiYDmnInnmoTot6/nlLHkv6Hmga8KICAgIHJvdXRlcnM6IGZ1bmN0aW9uIHJvdXRlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5wZXJtaXNzaW9uLnRvcGJhclJvdXRlcnM7CiAgICB9LAogICAgLy8g6K6+572u5a2Q6Lev55SxCiAgICBjaGlsZHJlbk1lbnVzOiBmdW5jdGlvbiBjaGlsZHJlbk1lbnVzKCkgewogICAgICB2YXIgY2hpbGRyZW5NZW51cyA9IFtdOwogICAgICB0aGlzLnJvdXRlcnMubWFwKGZ1bmN0aW9uIChyb3V0ZXIpIHsKICAgICAgICBmb3IgKHZhciBpdGVtIGluIHJvdXRlci5jaGlsZHJlbikgewogICAgICAgICAgaWYgKHJvdXRlci5jaGlsZHJlbltpdGVtXS5wYXJlbnRQYXRoID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgcm91dGVyLmNoaWxkcmVuW2l0ZW1dLnBhcmVudFBhdGggPSByb3V0ZXIucGF0aDsKICAgICAgICAgIH0KCiAgICAgICAgICBjaGlsZHJlbk1lbnVzLnB1c2gocm91dGVyLmNoaWxkcmVuW2l0ZW1dKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gY29uc3RhbnRSb3V0ZXMuY29uY2F0KGNoaWxkcmVuTWVudXMpOwogICAgfSwKICAgIC8vIOm7mOiupOa/gOa0u+eahOiPnOWNlQogICAgYWN0aXZlTWVudTogZnVuY3Rpb24gYWN0aXZlTWVudSgpIHsKICAgICAgdmFyIHBhdGggPSB0aGlzLiRyb3V0ZS5wYXRoOwogICAgICB2YXIgYWN0aXZlUGF0aCA9IHRoaXMucm91dGVyc1swXS5wYXRoOwoKICAgICAgaWYgKHBhdGgubGFzdEluZGV4T2YoJy8nKSA+IDApIHsKICAgICAgICB2YXIgdG1wUGF0aCA9IHBhdGguc3Vic3RyaW5nKDEsIHBhdGgubGVuZ3RoKTsKICAgICAgICBhY3RpdmVQYXRoID0gJy8nICsgdG1wUGF0aC5zdWJzdHJpbmcoMCwgdG1wUGF0aC5pbmRleE9mKCcvJykpOwogICAgICB9IGVsc2UgaWYgKHBhdGggPT09ICcvaW5kZXgnIHx8IHBhdGggPT09ICcnKSB7CiAgICAgICAgaWYgKCF0aGlzLmlzRnJpc3QpIHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB2dWUvbm8tc2lkZS1lZmZlY3RzLWluLWNvbXB1dGVkLXByb3BlcnRpZXMKICAgICAgICAgIHRoaXMuaXNGcmlzdCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFjdGl2ZVBhdGggPSAnaW5kZXgnOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5hY3RpdmVSb3V0ZXMoYWN0aXZlUGF0aCk7CiAgICAgIHJldHVybiBhY3RpdmVQYXRoOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuc2V0VmlzaWJsZU51bWJlcigpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5qC55o2u5a695bqm6K6h566X6K6+572u5pi+56S65qCP5pWwCiAgICBzZXRWaXNpYmxlTnVtYmVyOiBmdW5jdGlvbiBzZXRWaXNpYmxlTnVtYmVyKCkgewogICAgICB2YXIgd2lkdGggPSBkb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gMjAwOwogICAgICB2YXIgZWxXaWR0aCA9IHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoOwogICAgICB2YXIgbWVudUl0ZW1Ob2RlcyA9IHRoaXMuJGVsLmNoaWxkcmVuOwogICAgICB2YXIgbWVudVdpZHRoID0gQXJyYXkuZnJvbShtZW51SXRlbU5vZGVzKS5tYXAoZnVuY3Rpb24gKGkpIHsKICAgICAgICByZXR1cm4gaS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDsKICAgICAgfSk7CiAgICAgIHRoaXMudmlzaWJsZU51bWJlciA9IChwYXJzZUludCh3aWR0aCAtIGVsV2lkdGgpIC8gcGFyc2VJbnQobWVudVdpZHRoKSkudG9GaXhlZCgwKTsKICAgIH0sCiAgICAvLyDoj5zljZXpgInmi6nkuovku7YKICAgIGhhbmRsZVNlbGVjdDogZnVuY3Rpb24gaGFuZGxlU2VsZWN0KGtleSwga2V5UGF0aCkgewogICAgICBpZiAoa2V5LmluZGV4T2YoJ2h0dHA6Ly8nKSAhPT0gLTEgfHwga2V5LmluZGV4T2YoJ2h0dHBzOi8vJykgIT09IC0xKSB7CiAgICAgICAgLy8gaHR0cChzKTovLyDot6/lvoTmlrDnqpflj6PmiZPlvIAKICAgICAgICB3aW5kb3cub3BlbihrZXksICdfYmxhbmsnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjdGl2ZVJvdXRlcyhrZXkpOwogICAgICB9CiAgICB9LAogICAgLy8g5b2T5YmN5r+A5rS755qE6Lev55SxCiAgICBhY3RpdmVSb3V0ZXM6IGZ1bmN0aW9uIGFjdGl2ZVJvdXRlcyhrZXkpIHsKICAgICAgdmFyIHJvdXRlcyA9IFtdOwoKICAgICAgaWYgKHRoaXMuY2hpbGRyZW5NZW51cyAmJiB0aGlzLmNoaWxkcmVuTWVudXMubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuY2hpbGRyZW5NZW51cy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmIChrZXkgPT09IGl0ZW0ucGFyZW50UGF0aCB8fCBrZXkgPT09ICdpbmRleCcgJiYgaXRlbS5wYXRoID09PSAnJykgewogICAgICAgICAgICByb3V0ZXMucHVzaChpdGVtKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdwZXJtaXNzaW9uL1NFVF9TSURFQkFSX1JPVVRFUlMnLCByb3V0ZXMpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <el-menu\r\n    :default-active=\"activeMenu\"\r\n    mode=\"horizontal\"\r\n    @select=\"handleSelect\"\r\n  >\r\n    <template v-for=\"(item, index) in topMenus\">\r\n      <el-menu-item\r\n        v-if=\"index < visibleNumber\"\r\n        :key=\"index\"\r\n        :index=\"item.path\"\r\n      ><svg-icon :icon-class=\"item.meta.icon\" />\r\n        {{ item.meta.title }}</el-menu-item>\r\n    </template>\r\n\r\n    <!-- 顶部菜单超出数量折叠 -->\r\n    <el-submenu v-if=\"topMenus.length > visibleNumber\" index=\"more\">\r\n      <template slot=\"title\">更多菜单</template>\r\n      <template v-for=\"(item, index) in topMenus\">\r\n        <el-menu-item\r\n          v-if=\"index >= visibleNumber\"\r\n          :key=\"index\"\r\n          :index=\"item.path\"\r\n        ><svg-icon :icon-class=\"item.meta.icon\" />\r\n          {{ item.meta.title }}</el-menu-item>\r\n      </template>\r\n    </el-submenu>\r\n  </el-menu>\r\n</template>\r\n\r\n<script>\r\nimport { constantRoutes } from '@/router'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 顶部栏初始数\r\n      visibleNumber: 5,\r\n      // 是否为首次加载\r\n      isFrist: false\r\n    }\r\n  },\r\n  computed: {\r\n    // 顶部显示菜单\r\n    topMenus() {\r\n      return this.routers.map((menu) => ({\r\n        ...menu,\r\n        children: undefined\r\n      }))\r\n    },\r\n    // 所有的路由信息\r\n    routers() {\r\n      return this.$store.state.permission.topbarRouters\r\n    },\r\n    // 设置子路由\r\n    childrenMenus() {\r\n      var childrenMenus = []\r\n      this.routers.map((router) => {\r\n        for (var item in router.children) {\r\n          if (router.children[item].parentPath === undefined) {\r\n            router.children[item].parentPath = router.path\r\n          }\r\n          childrenMenus.push(router.children[item])\r\n        }\r\n      })\r\n      return constantRoutes.concat(childrenMenus)\r\n    },\r\n    // 默认激活的菜单\r\n    activeMenu() {\r\n      const path = this.$route.path\r\n      let activePath = this.routers[0].path\r\n      if (path.lastIndexOf('/') > 0) {\r\n        const tmpPath = path.substring(1, path.length)\r\n        activePath = '/' + tmpPath.substring(0, tmpPath.indexOf('/'))\r\n      } else if (path === '/index' || path === '') {\r\n        if (!this.isFrist) {\r\n          // eslint-disable-next-line vue/no-side-effects-in-computed-properties\r\n          this.isFrist = true\r\n        } else {\r\n          activePath = 'index'\r\n        }\r\n      }\r\n      this.activeRoutes(activePath)\r\n      return activePath\r\n    }\r\n  },\r\n  mounted() {\r\n    this.setVisibleNumber()\r\n  },\r\n  methods: {\r\n    // 根据宽度计算设置显示栏数\r\n    setVisibleNumber() {\r\n      const width = document.body.getBoundingClientRect().width - 200\r\n      const elWidth = this.$el.getBoundingClientRect().width\r\n      const menuItemNodes = this.$el.children\r\n      const menuWidth = Array.from(menuItemNodes).map(\r\n        (i) => i.getBoundingClientRect().width\r\n      )\r\n      this.visibleNumber = (\r\n        parseInt(width - elWidth) / parseInt(menuWidth)\r\n      ).toFixed(0)\r\n    },\r\n    // 菜单选择事件\r\n    handleSelect(key, keyPath) {\r\n      if (key.indexOf('http://') !== -1 || key.indexOf('https://') !== -1) {\r\n        // http(s):// 路径新窗口打开\r\n        window.open(key, '_blank')\r\n      } else {\r\n        this.activeRoutes(key)\r\n      }\r\n    },\r\n    // 当前激活的路由\r\n    activeRoutes(key) {\r\n      var routes = []\r\n      if (this.childrenMenus && this.childrenMenus.length > 0) {\r\n        this.childrenMenus.map((item) => {\r\n          if (key === item.parentPath || (key === 'index' && item.path === '')) {\r\n            routes.push(item)\r\n          }\r\n        })\r\n      }\r\n      this.$store.commit('permission/SET_SIDEBAR_ROUTERS', routes)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-menu--horizontal > .el-menu-item {\r\n  float: left;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  margin: 0;\r\n  border-bottom: 3px solid transparent;\r\n  color: #999093;\r\n  padding: 0 5px;\r\n  margin: 0 10px;\r\n}\r\n\r\n.el-menu--horizontal > .el-menu-item.is-active {\r\n  border-bottom: 3px solid #409eff;\r\n  color: #303133;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/TopNav"}]}