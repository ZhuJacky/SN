{"remainingRequest":"D:\\project\\SN\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\project\\SN\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\SN\\go-admin-ui\\src\\views\\profile\\userAvatar.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\SN\\go-admin-ui\\src\\views\\profile\\userAvatar.vue","mtime":1656928972298},{"path":"D:\\project\\SN\\go-admin-ui\\babel.config.js","mtime":1656928972012},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1656929009473},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1656929012008}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgeyBWdWVDcm9wcGVyIH0gZnJvbSAndnVlLWNyb3BwZXInOwppbXBvcnQgeyB1cGxvYWRBdmF0YXIgfSBmcm9tICdAL2FwaS9hZG1pbi9zeXMtdXNlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBWdWVDcm9wcGVyOiBWdWVDcm9wcGVyCiAgfSwKICBwcm9wczogewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHZ1ZS9yZXF1aXJlLWRlZmF1bHQtcHJvcAogICAgdXNlcjogewogICAgICB0eXBlOiBPYmplY3QKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYIKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIC8vIOW8ueWHuuWxguagh+mimAogICAgICB0aXRsZTogJ+S/ruaUueWktOWDjycsCiAgICAgIG9wdGlvbnM6IHsKICAgICAgICBpbWc6IHN0b3JlLmdldHRlcnMuYXZhdGFyLAogICAgICAgIC8vIOijgeWJquWbvueJh+eahOWcsOWdgAogICAgICAgIGF1dG9Dcm9wOiB0cnVlLAogICAgICAgIC8vIOaYr+WQpum7mOiupOeUn+aIkOaIquWbvuahhgogICAgICAgIGF1dG9Dcm9wV2lkdGg6IDIwMCwKICAgICAgICAvLyDpu5jorqTnlJ/miJDmiKrlm77moYblrr3luqYKICAgICAgICBhdXRvQ3JvcEhlaWdodDogMjAwLAogICAgICAgIC8vIOm7mOiupOeUn+aIkOaIquWbvuahhumrmOW6pgogICAgICAgIGZpeGVkQm94OiB0cnVlIC8vIOWbuuWumuaIquWbvuahhuWkp+WwjyDkuI3lhYHorrjmlLnlj5gKCiAgICAgIH0sCiAgICAgIHByZXZpZXdzOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOe8lui+keWktOWDjwogICAgZWRpdENyb3BwZXI6IGZ1bmN0aW9uIGVkaXRDcm9wcGVyKCkgewogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgfSwKICAgIC8vIOimhueblum7mOiupOeahOS4iuS8oOihjOS4ugogICAgcmVxdWVzdFVwbG9hZDogZnVuY3Rpb24gcmVxdWVzdFVwbG9hZCgpIHt9LAogICAgLy8g5ZCR5bem5peL6L2sCiAgICByb3RhdGVMZWZ0OiBmdW5jdGlvbiByb3RhdGVMZWZ0KCkgewogICAgICB0aGlzLiRyZWZzLmNyb3BwZXIucm90YXRlTGVmdCgpOwogICAgfSwKICAgIC8vIOWQkeWPs+aXi+i9rAogICAgcm90YXRlUmlnaHQ6IGZ1bmN0aW9uIHJvdGF0ZVJpZ2h0KCkgewogICAgICB0aGlzLiRyZWZzLmNyb3BwZXIucm90YXRlUmlnaHQoKTsKICAgIH0sCiAgICAvLyDlm77niYfnvKnmlL4KICAgIGNoYW5nZVNjYWxlOiBmdW5jdGlvbiBjaGFuZ2VTY2FsZShudW0pIHsKICAgICAgbnVtID0gbnVtIHx8IDE7CiAgICAgIHRoaXMuJHJlZnMuY3JvcHBlci5jaGFuZ2VTY2FsZShudW0pOwogICAgfSwKICAgIC8vIOS4iuS8oOmihOWkhOeQhgogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKGZpbGUudHlwZS5pbmRleE9mKCdpbWFnZS8nKSA9PT0gLTEpIHsKICAgICAgICB0aGlzLm1zZ0Vycm9yKCfmlofku7bmoLzlvI/plJnor6/vvIzor7fkuIrkvKDlm77niYfnsbvlnoss5aaC77yaSlBH77yMUE5H5ZCO57yA55qE5paH5Lu244CCJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CgogICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5vcHRpb25zLmltZyA9IHJlYWRlci5yZXN1bHQ7CiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS8oOWbvueJhwogICAgdXBsb2FkSW1nOiBmdW5jdGlvbiB1cGxvYWRJbWcoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmcy5jcm9wcGVyLmdldENyb3BCbG9iKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd1cGxvYWRbXScsIGRhdGEpOwogICAgICAgIHVwbG9hZEF2YXRhcihmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgX3RoaXMyLm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMyLm9wdGlvbnMuaW1nID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSSArIHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICBfdGhpczIubXNnU3VjY2VzcyhyZXNwb25zZS5tc2cpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMyLm1zZ0Vycm9yKHJlc3BvbnNlLm1zZyk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMyLiRyZWZzLmNyb3BwZXIuY2xlYXJDcm9wKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWunuaXtumihOiniAogICAgcmVhbFRpbWU6IGZ1bmN0aW9uIHJlYWxUaW1lKGRhdGEpIHsKICAgICAgdGhpcy5wcmV2aWV3cyA9IGRhdGE7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["userAvatar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA,OAAA,KAAA,MAAA,SAAA;AACA,SAAA,UAAA,QAAA,aAAA;AACA,SAAA,YAAA,QAAA,sBAAA;AAEA,eAAA;EACA,UAAA,EAAA;IAAA,UAAA,EAAA;EAAA,CADA;EAEA,KAAA,EAAA;IACA;IACA,IAAA,EAAA;MAAA,IAAA,EAAA;IAAA;EAFA,CAFA;EAMA,IANA,kBAMA;IACA,OAAA;MACA;MACA,IAAA,EAAA,KAFA;MAGA;MACA,KAAA,EAAA,MAJA;MAKA,OAAA,EAAA;QACA,GAAA,EAAA,KAAA,CAAA,OAAA,CAAA,MADA;QACA;QACA,QAAA,EAAA,IAFA;QAEA;QACA,aAAA,EAAA,GAHA;QAGA;QACA,cAAA,EAAA,GAJA;QAIA;QACA,QAAA,EAAA,IALA,CAKA;;MALA,CALA;MAYA,QAAA,EAAA;IAZA,CAAA;EAcA,CArBA;EAsBA,OAAA,EAAA;IACA;IACA,WAFA,yBAEA;MACA,KAAA,IAAA,GAAA,IAAA;IACA,CAJA;IAKA;IACA,aANA,2BAMA,CACA,CAPA;IAQA;IACA,UATA,wBASA;MACA,KAAA,KAAA,CAAA,OAAA,CAAA,UAAA;IACA,CAXA;IAYA;IACA,WAbA,yBAaA;MACA,KAAA,KAAA,CAAA,OAAA,CAAA,WAAA;IACA,CAfA;IAgBA;IACA,WAjBA,uBAiBA,GAjBA,EAiBA;MACA,GAAA,GAAA,GAAA,IAAA,CAAA;MACA,KAAA,KAAA,CAAA,OAAA,CAAA,WAAA,CAAA,GAAA;IACA,CApBA;IAqBA;IACA,YAtBA,wBAsBA,IAtBA,EAsBA;MAAA;;MACA,IAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA,QAAA,MAAA,CAAA,CAAA,EAAA;QACA,KAAA,QAAA,CAAA,gCAAA;MACA,CAFA,MAEA;QACA,IAAA,MAAA,GAAA,IAAA,UAAA,EAAA;QACA,MAAA,CAAA,aAAA,CAAA,IAAA;;QACA,MAAA,CAAA,MAAA,GAAA,YAAA;UACA,KAAA,CAAA,OAAA,CAAA,GAAA,GAAA,MAAA,CAAA,MAAA;QACA,CAFA;MAGA;IACA,CAhCA;IAiCA;IACA,SAlCA,uBAkCA;MAAA;;MACA,KAAA,KAAA,CAAA,OAAA,CAAA,WAAA,CAAA,UAAA,IAAA,EAAA;QACA,IAAA,QAAA,GAAA,IAAA,QAAA,EAAA;QACA,QAAA,CAAA,MAAA,CAAA,UAAA,EAAA,IAAA;QACA,YAAA,CAAA,QAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;UACA,IAAA,QAAA,CAAA,IAAA,KAAA,GAAA,EAAA;YACA,MAAA,CAAA,IAAA,GAAA,KAAA;YACA,MAAA,CAAA,OAAA,CAAA,GAAA,GAAA,OAAA,CAAA,GAAA,CAAA,gBAAA,GAAA,QAAA,CAAA,IAAA;;YACA,MAAA,CAAA,UAAA,CAAA,QAAA,CAAA,GAAA;UACA,CAJA,MAIA;YACA,MAAA,CAAA,QAAA,CAAA,QAAA,CAAA,GAAA;UACA;;UACA,MAAA,CAAA,KAAA,CAAA,OAAA,CAAA,SAAA;QACA,CATA;MAUA,CAbA;IAcA,CAjDA;IAkDA;IACA,QAnDA,oBAmDA,IAnDA,EAmDA;MACA,KAAA,QAAA,GAAA,IAAA;IACA;EArDA;AAtBA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <img :src=\"options.img\" title=\"点击上传头像\" class=\"img-circle img-lg\" @click=\"editCropper()\">\r\n    <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"800px\">\r\n      <el-row>\r\n        <el-col :xs=\"24\" :md=\"12\" :style=\"{height: '350px'}\">\r\n          <vue-cropper\r\n            ref=\"cropper\"\r\n            :img=\"options.img\"\r\n            :info=\"true\"\r\n            :auto-crop=\"options.autoCrop\"\r\n            :auto-crop-width=\"options.autoCropWidth\"\r\n            :auto-crop-height=\"options.autoCropHeight\"\r\n            :fixed-box=\"options.fixedBox\"\r\n            @realTime=\"realTime\"\r\n          />\r\n        </el-col>\r\n        <el-col :xs=\"24\" :md=\"12\" :style=\"{height: '350px'}\">\r\n          <div class=\"avatar-upload-preview\">\r\n            <img :src=\"previews.url\" :style=\"previews.img\">\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n      <br>\r\n      <el-row>\r\n        <el-col :lg=\"2\" :md=\"2\">\r\n          <el-upload action=\"#\" :http-request=\"requestUpload\" :show-file-list=\"false\" :before-upload=\"beforeUpload\">\r\n            <el-button size=\"small\">\r\n              上传\r\n              <i class=\"el-icon-upload el-icon--right\" />\r\n            </el-button>\r\n          </el-upload>\r\n        </el-col>\r\n        <el-col :lg=\"{span: 1, offset: 2}\" :md=\"2\">\r\n          <el-button icon=\"el-icon-plus\" size=\"small\" @click=\"changeScale(1)\" />\r\n        </el-col>\r\n        <el-col :lg=\"{span: 1, offset: 1}\" :md=\"2\">\r\n          <el-button icon=\"el-icon-minus\" size=\"small\" @click=\"changeScale(-1)\" />\r\n        </el-col>\r\n        <el-col :lg=\"{span: 1, offset: 1}\" :md=\"2\">\r\n          <el-button icon=\"el-icon-refresh-left\" size=\"small\" @click=\"rotateLeft()\" />\r\n        </el-col>\r\n        <el-col :lg=\"{span: 1, offset: 1}\" :md=\"2\">\r\n          <el-button icon=\"el-icon-refresh-right\" size=\"small\" @click=\"rotateRight()\" />\r\n        </el-col>\r\n        <el-col :lg=\"{span: 2, offset: 6}\" :md=\"2\">\r\n          <el-button type=\"primary\" size=\"small\" @click=\"uploadImg()\">提 交</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport store from '@/store'\r\nimport { VueCropper } from 'vue-cropper'\r\nimport { uploadAvatar } from '@/api/admin/sys-user'\r\n\r\nexport default {\r\n  components: { VueCropper },\r\n  props: {\r\n    // eslint-disable-next-line vue/require-default-prop\r\n    user: { type: Object }\r\n  },\r\n  data() {\r\n    return {\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 弹出层标题\r\n      title: '修改头像',\r\n      options: {\r\n        img: store.getters.avatar, // 裁剪图片的地址\r\n        autoCrop: true, // 是否默认生成截图框\r\n        autoCropWidth: 200, // 默认生成截图框宽度\r\n        autoCropHeight: 200, // 默认生成截图框高度\r\n        fixedBox: true // 固定截图框大小 不允许改变\r\n      },\r\n      previews: {}\r\n    }\r\n  },\r\n  methods: {\r\n    // 编辑头像\r\n    editCropper() {\r\n      this.open = true\r\n    },\r\n    // 覆盖默认的上传行为\r\n    requestUpload() {\r\n    },\r\n    // 向左旋转\r\n    rotateLeft() {\r\n      this.$refs.cropper.rotateLeft()\r\n    },\r\n    // 向右旋转\r\n    rotateRight() {\r\n      this.$refs.cropper.rotateRight()\r\n    },\r\n    // 图片缩放\r\n    changeScale(num) {\r\n      num = num || 1\r\n      this.$refs.cropper.changeScale(num)\r\n    },\r\n    // 上传预处理\r\n    beforeUpload(file) {\r\n      if (file.type.indexOf('image/') === -1) {\r\n        this.msgError('文件格式错误，请上传图片类型,如：JPG，PNG后缀的文件。')\r\n      } else {\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(file)\r\n        reader.onload = () => {\r\n          this.options.img = reader.result\r\n        }\r\n      }\r\n    },\r\n    // 上传图片\r\n    uploadImg() {\r\n      this.$refs.cropper.getCropBlob(data => {\r\n        const formData = new FormData()\r\n        formData.append('upload[]', data)\r\n        uploadAvatar(formData).then(response => {\r\n          if (response.code === 200) {\r\n            this.open = false\r\n            this.options.img = process.env.VUE_APP_BASE_API + response.data\r\n            this.msgSuccess(response.msg)\r\n          } else {\r\n            this.msgError(response.msg)\r\n          }\r\n          this.$refs.cropper.clearCrop()\r\n        })\r\n      })\r\n    },\r\n    // 实时预览\r\n    realTime(data) {\r\n      this.previews = data\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views/profile"}]}