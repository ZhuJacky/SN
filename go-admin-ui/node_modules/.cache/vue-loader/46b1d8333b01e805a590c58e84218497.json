{"remainingRequest":"D:\\project\\SN\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\SN\\go-admin-ui\\src\\views\\admin\\sys-oper-log\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\SN\\go-admin-ui\\src\\views\\admin\\sys-oper-log\\index.vue","mtime":1656928972271},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1656929009473},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1656929012008}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBsaXN0U3lzT3BlcmxvZywgZGVsU3lzT3BlcmxvZywgY2xlYW5PcGVybG9nIH0gZnJvbSAnQC9hcGkvYWRtaW4vc3lzLW9wZXJhLWxvZycNCmltcG9ydCB7IGZvcm1hdEpzb24gfSBmcm9tICdAL3V0aWxzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdTeXNPcGVyTG9nTWFuYWdlJywNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g6YGu572p5bGCDQogICAgICBsb2FkaW5nOiB0cnVlLA0KICAgICAgLy8g6YCJ5Lit5pWw57uEDQogICAgICBpZHM6IFtdLA0KICAgICAgLy8g6Z2e5aSa5Liq56aB55SoDQogICAgICBtdWx0aXBsZTogdHJ1ZSwNCiAgICAgIC8vIOaAu+adoeaVsA0KICAgICAgdG90YWw6IDAsDQogICAgICAvLyDooajmoLzmlbDmja4NCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGCDQogICAgICBvcGVuOiBmYWxzZSwNCiAgICAgIC8vIOexu+Wei+aVsOaNruWtl+WFuA0KICAgICAgc3RhdHVzT3B0aW9uczogW10sDQogICAgICAvLyDml6XmnJ/ojIPlm7QNCiAgICAgIGRhdGVSYW5nZTogW10sDQogICAgICAvLyDooajljZXlj4LmlbANCiAgICAgIGZvcm06IHt9LA0KICAgICAgLy8g5p+l6K+i5Y+C5pWwDQogICAgICBxdWVyeVBhcmFtczogew0KICAgICAgICBwYWdlSW5kZXg6IDEsDQogICAgICAgIHBhZ2VTaXplOiAxMCwNCiAgICAgICAgdGl0bGU6IHVuZGVmaW5lZCwNCiAgICAgICAgb3Blck5hbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgYnVzaW5lc3NUeXBlOiB1bmRlZmluZWQsDQogICAgICAgIHN0YXR1czogdW5kZWZpbmVkLA0KICAgICAgICBjcmVhdGVkQXRPcmRlcjogJ2Rlc2MnDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0TGlzdCgpDQoNCiAgICB0aGlzLmdldERpY3RzKCdzeXNfY29tbW9uX3N0YXR1cycpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgdGhpcy5zdGF0dXNPcHRpb25zID0gcmVzcG9uc2UuZGF0YQ0KICAgIH0pDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvKiog5p+l6K+i55m75b2V5pel5b+XICovDQogICAgZ2V0TGlzdCgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCiAgICAgIGxpc3RTeXNPcGVybG9nKHRoaXMuYWRkRGF0ZVJhbmdlKHRoaXMucXVlcnlQYXJhbXMsIHRoaXMuZGF0ZVJhbmdlKSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdA0KICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS5jb3VudA0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgfQ0KICAgICAgKQ0KICAgIH0sDQogICAgLy8g5pON5L2c5pel5b+X54q25oCB5a2X5YW457+76K+RDQogICAgc3RhdHVzRm9ybWF0KHJvdywgY29sdW1uKSB7DQogICAgICByZXR1cm4gdGhpcy5zZWxlY3REaWN0TGFiZWwodGhpcy5zdGF0dXNPcHRpb25zLCByb3cuc3RhdHVzKQ0KICAgIH0sDQogICAgLyoqIOaQnOe0ouaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVF1ZXJ5KCkgew0KICAgICAgdGhpcy5xdWVyeVBhcmFtcy5wYWdlSW5kZXggPSAxDQogICAgICB0aGlzLmdldExpc3QoKQ0KICAgIH0sDQogICAgLyoqIOmHjee9ruaMiemSruaTjeS9nCAqLw0KICAgIHJlc2V0UXVlcnkoKSB7DQogICAgICB0aGlzLmRhdGVSYW5nZSA9IFtdDQogICAgICB0aGlzLnJlc2V0Rm9ybSgncXVlcnlGb3JtJykNCiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKQ0KICAgIH0sDQogICAgLy8g5aSa6YCJ5qGG6YCJ5Lit5pWw5o2uDQogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdGlvbikgew0KICAgICAgdGhpcy5pZHMgPSBzZWxlY3Rpb24ubWFwKGl0ZW0gPT4gaXRlbS5pZCkNCiAgICAgIHRoaXMubXVsdGlwbGUgPSAhc2VsZWN0aW9uLmxlbmd0aA0KICAgIH0sDQogICAgLyoqIOivpue7huaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVZpZXcocm93KSB7DQogICAgICB0aGlzLm9wZW4gPSB0cnVlDQogICAgICB0aGlzLmZvcm0gPSByb3cNCiAgICB9LA0KICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVEZWxldGUocm93KSB7DQogICAgICBjb25zdCBvcGVySWRzID0gKHJvdy5pZCAmJiBbcm93LmlkXSkgfHwgdGhpcy5pZHMNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpOaXpeW/l+e8luWPt+S4uiInICsgb3BlcklkcyArICci55qE5pWw5o2u6aG5PycsICforablkYonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkudGhlbihmdW5jdGlvbigpIHsNCiAgICAgICAgcmV0dXJuIGRlbFN5c09wZXJsb2coeyAnaWRzJzogb3BlcklkcyB9KQ0KICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgIHRoaXMubXNnU3VjY2VzcyhyZXNwb25zZS5tc2cpDQogICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2UNCiAgICAgICAgICB0aGlzLmdldExpc3QoKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMubXNnRXJyb3IocmVzcG9uc2UubXNnKQ0KICAgICAgICB9DQogICAgICB9KS5jYXRjaChmdW5jdGlvbigpIHt9KQ0KICAgIH0sDQogICAgLyoqIOa4heepuuaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZUNsZWFuKCkgew0KICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5riF56m65omA5pyJ5pON5L2c5pel5b+X5pWw5o2u6aG5PycsICforablkYonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkudGhlbihmdW5jdGlvbigpIHsNCiAgICAgICAgcmV0dXJuIGNsZWFuT3BlcmxvZygpDQogICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKHJlc3BvbnNlLm1zZykNCiAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5tc2dFcnJvcihyZXNwb25zZS5tc2cpDQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkge30pDQogICAgfSwNCiAgICAvKiog5a+85Ye65oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlRXhwb3J0KCkgew0KICAgICAgLy8gY29uc3QgcXVlcnlQYXJhbXMgPSB0aGlzLnF1ZXJ5UGFyYW1zDQogICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbnoa7orqTlr7zlh7rmiYDmnInmk43kvZzml6Xlv5fmlbDmja7pobk/JywgJ+itpuWRiicsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy5kb3dubG9hZExvYWRpbmcgPSB0cnVlDQogICAgICAgIGltcG9ydCgnQC92ZW5kb3IvRXhwb3J0MkV4Y2VsJykudGhlbihleGNlbCA9PiB7DQogICAgICAgICAgY29uc3QgdEhlYWRlciA9IFsn5pel5b+X57yW5Y+3JywgJ+ezu+e7n+aooeWdlycsICfmk43kvZznsbvlnosnLCAn6K+35rGC5pa55byPJywgJ+aTjeS9nOS6uuWRmCcsICfkuLvmnLonLCAn5pON5L2c5Zyw54K5JywgJ+aTjeS9nOeKtuaAgScsICfmk43kvZx1cmwnLCAn5pON5L2c5pel5pyfJ10NCiAgICAgICAgICBjb25zdCBmaWx0ZXJWYWwgPSBbJ0lEJywgJ3RpdGxlJywgJ2J1c2luZXNzVHlwZScsICdtZXRob2QnLCAnb3Blck5hbWUnLCAnb3BlcklwJywgJ29wZXJMb2NhdGlvbicsICdzdGF0dXMnLCAnb3BlclVybCcsICdvcGVyVGltZSddDQogICAgICAgICAgY29uc3QgbGlzdCA9IHRoaXMubGlzdA0KICAgICAgICAgIGNvbnN0IGRhdGEgPSBmb3JtYXRKc29uKGZpbHRlclZhbCwgbGlzdCkNCiAgICAgICAgICBleGNlbC5leHBvcnRfanNvbl90b19leGNlbCh7DQogICAgICAgICAgICBoZWFkZXI6IHRIZWFkZXIsDQogICAgICAgICAgICBkYXRhLA0KICAgICAgICAgICAgZmlsZW5hbWU6ICfmk43kvZzml6Xlv5cnLA0KICAgICAgICAgICAgYXV0b1dpZHRoOiB0cnVlLCAvLyBPcHRpb25hbA0KICAgICAgICAgICAgYm9va1R5cGU6ICd4bHN4JyAvLyBPcHRpb25hbA0KICAgICAgICAgIH0pDQogICAgICAgICAgdGhpcy5kb3dubG9hZExvYWRpbmcgPSBmYWxzZQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4LA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/admin/sys-oper-log","sourcesContent":["<template>\r\n  <BasicLayout>\r\n    <template #wrapper>\r\n      <el-card class=\"box-card\">\r\n        <el-form ref=\"queryForm\" :model=\"queryParams\" :inline=\"true\" label-width=\"68px\">\r\n          <el-form-item label=\"状态\" prop=\"status\">\r\n            <el-select\r\n              v-model=\"queryParams.status\"\r\n              placeholder=\"操作状态\"\r\n              clearable\r\n              size=\"small\"\r\n              style=\"width: 160px\"\r\n            >\r\n              <el-option\r\n                v-for=\"dict in statusOptions\"\r\n                :key=\"dict.value\"\r\n                :label=\"dict.label\"\r\n                :value=\"dict.value\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"创建时间\">\r\n            <el-date-picker\r\n              v-model=\"dateRange\"\r\n              size=\"small\"\r\n              type=\"datetimerange\"\r\n              :picker-options=\"pickerOptions\"\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              align=\"right\"\r\n              value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <el-row :gutter=\"10\" class=\"mb8\">\r\n          <el-col :span=\"1.5\">\r\n            <el-button\r\n              v-permisaction=\"['admin:sysOperLog:remove']\"\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              :disabled=\"multiple\"\r\n              @click=\"handleDelete\"\r\n            >删除</el-button>\r\n          </el-col>\r\n          <el-col :span=\"1.5\">\r\n            <el-button\r\n              v-permisaction=\"['admin:sysOperLog:export']\"\r\n              type=\"warning\"\r\n              icon=\"el-icon-download\"\r\n              size=\"mini\"\r\n              @click=\"handleExport\"\r\n            >导出</el-button>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <el-table v-loading=\"loading\" :data=\"list\" border @selection-change=\"handleSelectionChange\">\r\n          <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n          <el-table-column label=\"编号\" width=\"70\" prop=\"id\" />\r\n          <el-table-column\r\n            label=\"Request info\"\r\n            prop=\"operUrl\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-popover trigger=\"hover\" placement=\"top\">\r\n\r\n                <p>Request:\r\n                  <el-tag v-if=\"scope.row.requestMethod=='GET'\">{{ scope.row.requestMethod }}</el-tag>\r\n                  <el-tag v-if=\"scope.row.requestMethod=='POST'\" type=\"success\">{{ scope.row.requestMethod }}</el-tag>\r\n                  <el-tag v-if=\"scope.row.requestMethod=='PUT'\" type=\"warning\">{{ scope.row.requestMethod }}</el-tag>\r\n                  <el-tag v-if=\"scope.row.requestMethod=='DELETE'\" type=\"danger\">{{ scope.row.requestMethod }}</el-tag>\r\n                  {{ scope.row.operUrl }}\r\n                </p>\r\n                <p>Host: {{ scope.row.operIp }}</p>\r\n                <p>Location: {{ scope.row.operLocation }}</p>\r\n                <p>耗时: {{ scope.row.latencyTime }}</p>\r\n                <div slot=\"reference\" class=\"name-wrapper\">\r\n                  <el-tag v-if=\"scope.row.requestMethod=='GET'\">{{ scope.row.requestMethod }}</el-tag>\r\n                  <el-tag v-if=\"scope.row.requestMethod=='POST'\" type=\"success\">{{ scope.row.requestMethod }}</el-tag>\r\n                  <el-tag v-if=\"scope.row.requestMethod=='PUT'\" type=\"warning\">{{ scope.row.requestMethod }}</el-tag>\r\n                  <el-tag v-if=\"scope.row.requestMethod=='DELETE'\" type=\"danger\">{{ scope.row.requestMethod }}</el-tag>\r\n                  {{ scope.row.operUrl }}\r\n                </div>\r\n              </el-popover>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            label=\"操作人员\"\r\n            prop=\"operName\"\r\n            width=\"160\"\r\n            :show-overflow-tooltip=\"true\"\r\n          />\r\n          <el-table-column\r\n            label=\"状态\"\r\n            prop=\"status\"\r\n            width=\"80\"\r\n            :show-overflow-tooltip=\"true\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-tag v-if=\"scope.row.status=='2'\" type=\"success\">{{ statusFormat(scope.row,scope.row.status) }}</el-tag>\r\n              <el-tag v-if=\"scope.row.status=='1'\" type=\"danger\">{{ statusFormat(scope.row,scope.row.status) }}</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作日期\" prop=\"operTime\" width=\"160\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ parseTime(scope.row.operTime) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            label=\"操作\"\r\n            width=\"80\"\r\n            class-name=\"small-padding fixed-width\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                v-permisaction=\"['admin:sysOperLog:query']\"\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                icon=\"el-icon-view\"\r\n                @click=\"handleView(scope.row,scope.index)\"\r\n              >详细</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <pagination\r\n          v-show=\"total>0\"\r\n          :total=\"total\"\r\n          :page.sync=\"queryParams.pageIndex\"\r\n          :limit.sync=\"queryParams.pageSize\"\r\n          @pagination=\"getList\"\r\n        />\r\n\r\n        <!-- 操作日志详细 -->\r\n        <el-dialog title=\"操作日志详细\" :visible.sync=\"open\" width=\"700px\">\r\n          <el-form ref=\"form\" :model=\"form\" label-width=\"100px\" size=\"mini\">\r\n            <el-row>\r\n              <el-col :span=\"24\">\r\n                <el-form-item label=\"请求地址：\">{{ form.operUrl }}</el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item\r\n                  label=\"登录信息：\"\r\n                >{{ form.operName }} / {{ form.operIp }} / {{ form.operLocation }}</el-form-item>\r\n              </el-col>\r\n\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"请求方式：\">{{ form.requestMethod }}</el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"耗时：\">{{ form.latencyTime }}</el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"24\">\r\n                <el-form-item label=\"请求参数：\">{{ form.operParam }}</el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"24\">\r\n                <el-form-item label=\"返回参数：\">{{ form.jsonResult }}</el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"操作状态：\">\r\n                  <div v-if=\"form.status === '2'\">正常</div>\r\n                  <div v-else-if=\"form.status === '1'\">关闭</div>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"操作时间：\">{{ parseTime(form.operTime) }}</el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"24\">\r\n                <el-form-item v-if=\"form.status === 1\" label=\"异常信息：\">{{ form.errorMsg }}</el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"open = false\">关 闭</el-button>\r\n          </div>\r\n        </el-dialog>\r\n      </el-card>\r\n    </template>\r\n  </BasicLayout>\r\n</template>\r\n\r\n<script>\r\nimport { listSysOperlog, delSysOperlog, cleanOperlog } from '@/api/admin/sys-opera-log'\r\nimport { formatJson } from '@/utils'\r\n\r\nexport default {\r\n  name: 'SysOperLogManage',\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 选中数组\r\n      ids: [],\r\n      // 非多个禁用\r\n      multiple: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 表格数据\r\n      list: [],\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 类型数据字典\r\n      statusOptions: [],\r\n      // 日期范围\r\n      dateRange: [],\r\n      // 表单参数\r\n      form: {},\r\n      // 查询参数\r\n      queryParams: {\r\n        pageIndex: 1,\r\n        pageSize: 10,\r\n        title: undefined,\r\n        operName: undefined,\r\n        businessType: undefined,\r\n        status: undefined,\r\n        createdAtOrder: 'desc'\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n\r\n    this.getDicts('sys_common_status').then(response => {\r\n      this.statusOptions = response.data\r\n    })\r\n  },\r\n  methods: {\r\n    /** 查询登录日志 */\r\n    getList() {\r\n      this.loading = true\r\n      listSysOperlog(this.addDateRange(this.queryParams, this.dateRange)).then(response => {\r\n        this.list = response.data.list\r\n        this.total = response.data.count\r\n        this.loading = false\r\n      }\r\n      )\r\n    },\r\n    // 操作日志状态字典翻译\r\n    statusFormat(row, column) {\r\n      return this.selectDictLabel(this.statusOptions, row.status)\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageIndex = 1\r\n      this.getList()\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.dateRange = []\r\n      this.resetForm('queryForm')\r\n      this.handleQuery()\r\n    },\r\n    // 多选框选中数据\r\n    handleSelectionChange(selection) {\r\n      this.ids = selection.map(item => item.id)\r\n      this.multiple = !selection.length\r\n    },\r\n    /** 详细按钮操作 */\r\n    handleView(row) {\r\n      this.open = true\r\n      this.form = row\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const operIds = (row.id && [row.id]) || this.ids\r\n      this.$confirm('是否确认删除日志编号为\"' + operIds + '\"的数据项?', '警告', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(function() {\r\n        return delSysOperlog({ 'ids': operIds })\r\n      }).then((response) => {\r\n        if (response.code === 200) {\r\n          this.msgSuccess(response.msg)\r\n          this.open = false\r\n          this.getList()\r\n        } else {\r\n          this.msgError(response.msg)\r\n        }\r\n      }).catch(function() {})\r\n    },\r\n    /** 清空按钮操作 */\r\n    handleClean() {\r\n      this.$confirm('是否确认清空所有操作日志数据项?', '警告', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(function() {\r\n        return cleanOperlog()\r\n      }).then((response) => {\r\n        if (response.code === 200) {\r\n          this.msgSuccess(response.msg)\r\n          this.open = false\r\n          this.getList()\r\n        } else {\r\n          this.msgError(response.msg)\r\n        }\r\n      }).catch(function() {})\r\n    },\r\n    /** 导出按钮操作 */\r\n    handleExport() {\r\n      // const queryParams = this.queryParams\r\n      this.$confirm('是否确认导出所有操作日志数据项?', '警告', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.downloadLoading = true\r\n        import('@/vendor/Export2Excel').then(excel => {\r\n          const tHeader = ['日志编号', '系统模块', '操作类型', '请求方式', '操作人员', '主机', '操作地点', '操作状态', '操作url', '操作日期']\r\n          const filterVal = ['ID', 'title', 'businessType', 'method', 'operName', 'operIp', 'operLocation', 'status', 'operUrl', 'operTime']\r\n          const list = this.list\r\n          const data = formatJson(filterVal, list)\r\n          excel.export_json_to_excel({\r\n            header: tHeader,\r\n            data,\r\n            filename: '操作日志',\r\n            autoWidth: true, // Optional\r\n            bookType: 'xlsx' // Optional\r\n          })\r\n          this.downloadLoading = false\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n"]}]}