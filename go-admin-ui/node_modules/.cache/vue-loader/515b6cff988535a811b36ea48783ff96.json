{"remainingRequest":"D:\\project\\SN\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\SN\\go-admin-ui\\src\\views\\admin\\sys-dept\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\SN\\go-admin-ui\\src\\views\\admin\\sys-dept\\index.vue","mtime":1656928972269},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1656929009473},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656929009565},{"path":"D:\\project\\SN\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1656929012008}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXREZXB0TGlzdCwgZ2V0RGVwdCwgZGVsRGVwdCwgYWRkRGVwdCwgdXBkYXRlRGVwdCB9IGZyb20gJ0AvYXBpL2FkbWluL3N5cy1kZXB0Jw0KaW1wb3J0IFRyZWVzZWxlY3QgZnJvbSAnQHJpb3BoYWUvdnVlLXRyZWVzZWxlY3QnDQppbXBvcnQgJ0ByaW9waGFlL3Z1ZS10cmVlc2VsZWN0L2Rpc3QvdnVlLXRyZWVzZWxlY3QuY3NzJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdTeXNEZXB0TWFuYWdlJywNCiAgY29tcG9uZW50czogeyBUcmVlc2VsZWN0IH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOmBrue9qeWxgg0KICAgICAgbG9hZGluZzogdHJ1ZSwNCiAgICAgIC8vIOihqOagvOagkeaVsOaNrg0KICAgICAgZGVwdExpc3Q6IFtdLA0KICAgICAgLy8g6YOo6Zeo5qCR6YCJ6aG5DQogICAgICBkZXB0T3B0aW9uczogW10sDQogICAgICAvLyDlvLnlh7rlsYLmoIfpopgNCiAgICAgIHRpdGxlOiAnJywNCiAgICAgIGlzRWRpdDogZmFsc2UsDQogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYINCiAgICAgIG9wZW46IGZhbHNlLA0KICAgICAgLy8g54q25oCB5pWw5o2u5a2X5YW4DQogICAgICBzdGF0dXNPcHRpb25zOiBbXSwNCiAgICAgIC8vIOafpeivouWPguaVsA0KICAgICAgcXVlcnlQYXJhbXM6IHsNCiAgICAgICAgZGVwdE5hbWU6IHVuZGVmaW5lZCwNCiAgICAgICAgc3RhdHVzOiB1bmRlZmluZWQNCiAgICAgIH0sDQogICAgICAvLyDooajljZXlj4LmlbANCiAgICAgIGZvcm06IHsNCiAgICAgIH0sDQogICAgICAvLyDooajljZXmoKHpqowNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHBhcmVudElkOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+S4iue6p+mDqOmXqOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0sDQogICAgICAgIGRlcHROYW1lOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+mDqOmXqOWQjeensOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0sDQogICAgICAgIHNvcnQ6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6I+c5Y2V6aG65bqP5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0NCiAgICAgICAgXSwNCiAgICAgICAgbGVhZGVyOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+i0n+i0o+S6uuS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0sDQogICAgICAgIGVtYWlsOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgdHlwZTogJ2VtYWlsJywNCiAgICAgICAgICAgIG1lc3NhZ2U6ICIn6K+36L6T5YWl5q2j56Gu55qE6YKu566x5Zyw5Z2AIiwNCiAgICAgICAgICAgIHRyaWdnZXI6IFsnYmx1cicsICdjaGFuZ2UnXQ0KICAgICAgICAgIH0NCiAgICAgICAgXSwNCiAgICAgICAgcGhvbmU6IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICBwYXR0ZXJuOiAvXjFbM3w0fDV8Nnw3fDh8OV1bMC05XVxkezh9JC8sDQogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+356CBJywNCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJw0KICAgICAgICAgIH0NCiAgICAgICAgXQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldExpc3QoKQ0KICAgIHRoaXMuZ2V0RGljdHMoJ3N5c19ub3JtYWxfZGlzYWJsZScpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgdGhpcy5zdGF0dXNPcHRpb25zID0gcmVzcG9uc2UuZGF0YQ0KICAgIH0pDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvKiog5p+l6K+i6YOo6Zeo5YiX6KGoICovDQogICAgZ2V0TGlzdCgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCiAgICAgIGdldERlcHRMaXN0KHRoaXMucXVlcnlQYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmRlcHRMaXN0ID0gcmVzcG9uc2UuZGF0YQ0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDovazmjaLpg6jpl6jmlbDmja7nu5PmnoQgKi8NCiAgICBub3JtYWxpemVyKG5vZGUpIHsNCiAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgew0KICAgICAgICBkZWxldGUgbm9kZS5jaGlsZHJlbg0KICAgICAgfQ0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgaWQ6IG5vZGUuZGVwdElkLA0KICAgICAgICBsYWJlbDogbm9kZS5kZXB0TmFtZSwNCiAgICAgICAgY2hpbGRyZW46IG5vZGUuY2hpbGRyZW4NCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKiDmn6Xor6Lpg6jpl6jkuIvmi4nmoJHnu5PmnoQgKi8NCiAgICBnZXRUcmVlc2VsZWN0KGUpIHsNCiAgICAgIGdldERlcHRMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMuZGVwdE9wdGlvbnMgPSBbXQ0KDQogICAgICAgIGlmIChlID09PSAndXBkYXRlJykgew0KICAgICAgICAgIGNvbnN0IGRlcHQgPSB7IGRlcHRJZDogMCwgZGVwdE5hbWU6ICfkuLvnsbvnm64nLCBjaGlsZHJlbjogW10sIGlzRGlzYWJsZWQ6IHRydWUgfQ0KICAgICAgICAgIGRlcHQuY2hpbGRyZW4gPSByZXNwb25zZS5kYXRhDQogICAgICAgICAgdGhpcy5kZXB0T3B0aW9ucy5wdXNoKGRlcHQpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc3QgZGVwdCA9IHsgZGVwdElkOiAwLCBkZXB0TmFtZTogJ+S4u+exu+ebricsIGNoaWxkcmVuOiBbXSB9DQogICAgICAgICAgZGVwdC5jaGlsZHJlbiA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgICB0aGlzLmRlcHRPcHRpb25zLnB1c2goZGVwdCkNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOWtl+WFuOeKtuaAgeWtl+WFuOe/u+ivkQ0KICAgIHN0YXR1c0Zvcm1hdChyb3cpIHsNCiAgICAgIHJldHVybiB0aGlzLnNlbGVjdERpY3RMYWJlbCh0aGlzLnN0YXR1c09wdGlvbnMsIHBhcnNlSW50KHJvdy5zdGF0dXMpKQ0KICAgIH0sDQogICAgLy8g5Y+W5raI5oyJ6ZKuDQogICAgY2FuY2VsKCkgew0KICAgICAgdGhpcy5vcGVuID0gZmFsc2UNCiAgICAgIHRoaXMucmVzZXQoKQ0KICAgIH0sDQogICAgLy8g6KGo5Y2V6YeN572uDQogICAgcmVzZXQoKSB7DQogICAgICB0aGlzLmZvcm0gPSB7DQogICAgICAgIGRlcHRJZDogdW5kZWZpbmVkLA0KICAgICAgICBwYXJlbnRJZDogdW5kZWZpbmVkLA0KICAgICAgICBkZXB0TmFtZTogdW5kZWZpbmVkLA0KICAgICAgICBzb3J0OiAxMCwNCiAgICAgICAgbGVhZGVyOiB1bmRlZmluZWQsDQogICAgICAgIHBob25lOiB1bmRlZmluZWQsDQogICAgICAgIGVtYWlsOiB1bmRlZmluZWQsDQogICAgICAgIHN0YXR1czogJzInDQogICAgICB9DQogICAgfSwNCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlUXVlcnkoKSB7DQogICAgICB0aGlzLmdldExpc3QoKQ0KICAgIH0sDQogICAgLyoqIOaWsOWinuaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZUFkZChyb3cpIHsNCiAgICAgIHRoaXMucmVzZXQoKQ0KICAgICAgdGhpcy5nZXRUcmVlc2VsZWN0KCdhZGQnKQ0KICAgICAgaWYgKHJvdyAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHRoaXMuZm9ybS5wYXJlbnRJZCA9IHJvdy5kZXB0SWQNCiAgICAgIH0NCiAgICAgIHRoaXMub3BlbiA9IHRydWUNCiAgICAgIHRoaXMudGl0bGUgPSAn5re75Yqg6YOo6ZeoJw0KICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZQ0KICAgIH0sDQogICAgLyoqIOS/ruaUueaMiemSruaTjeS9nCAqLw0KICAgIGhhbmRsZVVwZGF0ZShyb3cpIHsNCiAgICAgIHRoaXMucmVzZXQoKQ0KICAgICAgdGhpcy5nZXRUcmVlc2VsZWN0KCd1cGRhdGUnKQ0KDQogICAgICBnZXREZXB0KHJvdy5kZXB0SWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhDQogICAgICAgIHRoaXMuZm9ybS5zdGF0dXMgPSBTdHJpbmcodGhpcy5mb3JtLnN0YXR1cykNCiAgICAgICAgdGhpcy5mb3JtLnNvcnQgPSBTdHJpbmcodGhpcy5mb3JtLnNvcnQpDQogICAgICAgIHRoaXMub3BlbiA9IHRydWUNCiAgICAgICAgdGhpcy50aXRsZSA9ICfkv67mlLnpg6jpl6gnDQogICAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDmj5DkuqTmjInpkq4gKi8NCiAgICBzdWJtaXRGb3JtOiBmdW5jdGlvbigpIHsNCiAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIHRoaXMuZm9ybS5zdGF0dXMgPSBwYXJzZUludCh0aGlzLmZvcm0uc3RhdHVzKQ0KICAgICAgICAgIHRoaXMuZm9ybS5zb3J0ID0gcGFyc2VJbnQodGhpcy5mb3JtLnNvcnQpDQogICAgICAgICAgaWYgKHRoaXMuZm9ybS5kZXB0SWQgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgdXBkYXRlRGVwdCh0aGlzLmZvcm0sIHRoaXMuZm9ybS5kZXB0SWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKHJlc3BvbnNlLm1zZykNCiAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5tc2dFcnJvcihyZXNwb25zZS5tc2cpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGFkZERlcHQodGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMubXNnU3VjY2VzcyhyZXNwb25zZS5tc2cpDQogICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMubXNnRXJyb3IocmVzcG9uc2UubXNnKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDliKDpmaTmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVEZWxldGUocm93KSB7DQogICAgICBjb25zdCBJZHMgPSAocm93LmRlcHRJZCAmJiBbcm93LmRlcHRJZF0pIHx8IHRoaXMuaWRzDQogICAgICB0aGlzLiRjb25maXJtKA0KICAgICAgICAn5piv5ZCm56Gu6K6k5Yig6Zmk5ZCN56ew5Li6IicgKyByb3cuZGVwdE5hbWUgKyAnIueahOaVsOaNrumhuT8nLA0KICAgICAgICAn6K2m5ZGKJywNCiAgICAgICAgew0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgfQ0KICAgICAgKQ0KICAgICAgICAudGhlbihmdW5jdGlvbigpIHsNCiAgICAgICAgICByZXR1cm4gZGVsRGVwdCh7ICdpZHMnOiBJZHMgfSkNCiAgICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MocmVzcG9uc2UubXNnKQ0KICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2UNCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMubXNnRXJyb3IocmVzcG9uc2UubXNnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKSB7fSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+JA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/admin/sys-dept","sourcesContent":["<template>\r\n  <BasicLayout>\r\n    <template #wrapper>\r\n      <el-card class=\"box-card\">\r\n        <el-form :inline=\"true\">\r\n          <el-form-item label=\"部门名称\">\r\n            <el-input\r\n              v-model=\"queryParams.deptName\"\r\n              placeholder=\"请输入部门名称\"\r\n              clearable\r\n              size=\"small\"\r\n              @keyup.enter.native=\"handleQuery\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"状态\">\r\n            <el-select v-model=\"queryParams.status\" placeholder=\"部门状态\" clearable size=\"small\">\r\n              <el-option\r\n                v-for=\"dict in statusOptions\"\r\n                :key=\"dict.value\"\r\n                :label=\"dict.label\"\r\n                :value=\"dict.value\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button\r\n              class=\"filter-item\"\r\n              type=\"primary\"\r\n              icon=\"el-icon-search\"\r\n              size=\"mini\"\r\n              @click=\"handleQuery\"\r\n            >搜索</el-button>\r\n            <el-button\r\n              v-permisaction=\"['admin:sysDept:add']\"\r\n              class=\"filter-item\"\r\n              type=\"primary\"\r\n              icon=\"el-icon-plus\"\r\n              size=\"mini\"\r\n              @click=\"handleAdd\"\r\n            >新增</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <el-table\r\n          v-loading=\"loading\"\r\n          :data=\"deptList\"\r\n          row-key=\"deptId\"\r\n          default-expand-all\r\n          border\r\n          :tree-props=\"{children: 'children', hasChildren: 'hasChildren'}\"\r\n        >\r\n          <el-table-column prop=\"deptName\" label=\"部门名称\" />\r\n          <el-table-column prop=\"sort\" label=\"排序\" width=\"200\" />\r\n          <el-table-column prop=\"status\" label=\"状态\" :formatter=\"statusFormat\" width=\"100\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag\r\n                :type=\"scope.row.status === 1 ? 'danger' : 'success'\"\r\n                disable-transitions\r\n              >{{ statusFormat(scope.row) }}</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"创建时间\" align=\"center\" prop=\"createdAt\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ parseTime(scope.row.createdAt) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                v-permisaction=\"['admin:sysDept:edit']\"\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                icon=\"el-icon-edit\"\r\n                @click=\"handleUpdate(scope.row)\"\r\n              >修改</el-button>\r\n              <el-button\r\n                v-permisaction=\"['admin:sysDept:add']\"\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                icon=\"el-icon-plus\"\r\n                @click=\"handleAdd(scope.row)\"\r\n              >新增</el-button>\r\n              <el-button\r\n                v-if=\"scope.row.p_id != 0\"\r\n                v-permisaction=\"['admin:sysDept:remove']\"\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                icon=\"el-icon-delete\"\r\n                @click=\"handleDelete(scope.row)\"\r\n              >删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <!-- 添加或修改部门对话框 -->\r\n        <el-dialog :title=\"title\" :visible.sync=\"open\" width=\"600px\">\r\n          <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n            <el-row>\r\n              <el-col :span=\"24\">\r\n                <el-form-item label=\"上级部门\" prop=\"parentId\">\r\n                  <treeselect\r\n                    v-model=\"form.parentId\"\r\n                    :options=\"deptOptions\"\r\n                    :normalizer=\"normalizer\"\r\n                    :show-count=\"true\"\r\n                    placeholder=\"选择上级部门\"\r\n                    :is-disabled=\"isEdit\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"部门名称\" prop=\"deptName\">\r\n                  <el-input v-model=\"form.deptName\" placeholder=\"请输入部门名称\" />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"显示排序\" prop=\"orderNum\">\r\n                  <el-input-number v-model=\"form.sort\" controls-position=\"right\" :min=\"0\" />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"负责人\" prop=\"leader\">\r\n                  <el-input v-model=\"form.leader\" placeholder=\"请输入负责人\" maxlength=\"20\" />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"联系电话\" prop=\"phone\">\r\n                  <el-input v-model=\"form.phone\" placeholder=\"请输入联系电话\" maxlength=\"11\" />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                  <el-input v-model=\"form.email\" placeholder=\"请输入邮箱\" maxlength=\"50\" />\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"部门状态\">\r\n                  <el-radio-group v-model=\"form.status\">\r\n                    <el-radio\r\n                      v-for=\"dict in statusOptions\"\r\n                      :key=\"dict.value\"\r\n                      :label=\"dict.value\"\r\n                    >{{ dict.label }}</el-radio>\r\n                  </el-radio-group>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n            <el-button @click=\"cancel\">取 消</el-button>\r\n          </div>\r\n        </el-dialog>\r\n      </el-card>\r\n    </template>\r\n  </BasicLayout>\r\n</template>\r\n\r\n<script>\r\nimport { getDeptList, getDept, delDept, addDept, updateDept } from '@/api/admin/sys-dept'\r\nimport Treeselect from '@riophae/vue-treeselect'\r\nimport '@riophae/vue-treeselect/dist/vue-treeselect.css'\r\n\r\nexport default {\r\n  name: 'SysDeptManage',\r\n  components: { Treeselect },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 表格树数据\r\n      deptList: [],\r\n      // 部门树选项\r\n      deptOptions: [],\r\n      // 弹出层标题\r\n      title: '',\r\n      isEdit: false,\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 状态数据字典\r\n      statusOptions: [],\r\n      // 查询参数\r\n      queryParams: {\r\n        deptName: undefined,\r\n        status: undefined\r\n      },\r\n      // 表单参数\r\n      form: {\r\n      },\r\n      // 表单校验\r\n      rules: {\r\n        parentId: [\r\n          { required: true, message: '上级部门不能为空', trigger: 'blur' }\r\n        ],\r\n        deptName: [\r\n          { required: true, message: '部门名称不能为空', trigger: 'blur' }\r\n        ],\r\n        sort: [\r\n          { required: true, message: '菜单顺序不能为空', trigger: 'blur' }\r\n        ],\r\n        leader: [\r\n          { required: true, message: '负责人不能为空', trigger: 'blur' }\r\n        ],\r\n        email: [\r\n          {\r\n            type: 'email',\r\n            message: \"'请输入正确的邮箱地址\",\r\n            trigger: ['blur', 'change']\r\n          }\r\n        ],\r\n        phone: [\r\n          {\r\n            pattern: /^1[3|4|5|6|7|8|9][0-9]\\d{8}$/,\r\n            message: '请输入正确的手机号码',\r\n            trigger: 'blur'\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n    this.getDicts('sys_normal_disable').then(response => {\r\n      this.statusOptions = response.data\r\n    })\r\n  },\r\n  methods: {\r\n    /** 查询部门列表 */\r\n    getList() {\r\n      this.loading = true\r\n      getDeptList(this.queryParams).then(response => {\r\n        this.deptList = response.data\r\n        this.loading = false\r\n      })\r\n    },\r\n    /** 转换部门数据结构 */\r\n    normalizer(node) {\r\n      if (node.children && !node.children.length) {\r\n        delete node.children\r\n      }\r\n      return {\r\n        id: node.deptId,\r\n        label: node.deptName,\r\n        children: node.children\r\n      }\r\n    },\r\n    /** 查询部门下拉树结构 */\r\n    getTreeselect(e) {\r\n      getDeptList().then(response => {\r\n        this.deptOptions = []\r\n\r\n        if (e === 'update') {\r\n          const dept = { deptId: 0, deptName: '主类目', children: [], isDisabled: true }\r\n          dept.children = response.data\r\n          this.deptOptions.push(dept)\r\n        } else {\r\n          const dept = { deptId: 0, deptName: '主类目', children: [] }\r\n          dept.children = response.data\r\n          this.deptOptions.push(dept)\r\n        }\r\n      })\r\n    },\r\n    // 字典状态字典翻译\r\n    statusFormat(row) {\r\n      return this.selectDictLabel(this.statusOptions, parseInt(row.status))\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.open = false\r\n      this.reset()\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      this.form = {\r\n        deptId: undefined,\r\n        parentId: undefined,\r\n        deptName: undefined,\r\n        sort: 10,\r\n        leader: undefined,\r\n        phone: undefined,\r\n        email: undefined,\r\n        status: '2'\r\n      }\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.getList()\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd(row) {\r\n      this.reset()\r\n      this.getTreeselect('add')\r\n      if (row !== undefined) {\r\n        this.form.parentId = row.deptId\r\n      }\r\n      this.open = true\r\n      this.title = '添加部门'\r\n      this.isEdit = false\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.reset()\r\n      this.getTreeselect('update')\r\n\r\n      getDept(row.deptId).then(response => {\r\n        this.form = response.data\r\n        this.form.status = String(this.form.status)\r\n        this.form.sort = String(this.form.sort)\r\n        this.open = true\r\n        this.title = '修改部门'\r\n        this.isEdit = true\r\n      })\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm: function() {\r\n      this.$refs['form'].validate(valid => {\r\n        if (valid) {\r\n          this.form.status = parseInt(this.form.status)\r\n          this.form.sort = parseInt(this.form.sort)\r\n          if (this.form.deptId !== undefined) {\r\n            updateDept(this.form, this.form.deptId).then(response => {\r\n              if (response.code === 200) {\r\n                this.msgSuccess(response.msg)\r\n                this.open = false\r\n                this.getList()\r\n              } else {\r\n                this.msgError(response.msg)\r\n              }\r\n            })\r\n          } else {\r\n            addDept(this.form).then(response => {\r\n              if (response.code === 200) {\r\n                this.msgSuccess(response.msg)\r\n                this.open = false\r\n                this.getList()\r\n              } else {\r\n                this.msgError(response.msg)\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const Ids = (row.deptId && [row.deptId]) || this.ids\r\n      this.$confirm(\r\n        '是否确认删除名称为\"' + row.deptName + '\"的数据项?',\r\n        '警告',\r\n        {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }\r\n      )\r\n        .then(function() {\r\n          return delDept({ 'ids': Ids })\r\n        }).then((response) => {\r\n          if (response.code === 200) {\r\n            this.msgSuccess(response.msg)\r\n            this.open = false\r\n            this.getList()\r\n          } else {\r\n            this.msgError(response.msg)\r\n          }\r\n        }).catch(function() {})\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}