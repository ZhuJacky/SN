{"remainingRequest":"D:\\project\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\go-admin-ui\\src\\views\\admin\\sys-role\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\go-admin-ui\\src\\views\\admin\\sys-role\\index.vue","mtime":1656853948067},{"path":"D:\\project\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656856444878},{"path":"D:\\project\\go-admin-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1656856444875},{"path":"D:\\project\\go-admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656856444878},{"path":"D:\\project\\go-admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1656856444983}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBsaXN0Um9sZSwgZ2V0Um9sZSwgZGVsUm9sZSwgYWRkUm9sZSwgdXBkYXRlUm9sZSwgZGF0YVNjb3BlLCBjaGFuZ2VSb2xlU3RhdHVzIH0gZnJvbSAnQC9hcGkvYWRtaW4vc3lzLXJvbGUnDQppbXBvcnQgeyByb2xlTWVudVRyZWVzZWxlY3QgfSBmcm9tICdAL2FwaS9hZG1pbi9zeXMtbWVudScNCmltcG9ydCB7IHRyZWVzZWxlY3QgYXMgZGVwdFRyZWVzZWxlY3QsIHJvbGVEZXB0VHJlZXNlbGVjdCB9IGZyb20gJ0AvYXBpL2FkbWluL3N5cy1kZXB0Jw0KaW1wb3J0IHsgZm9ybWF0SnNvbiB9IGZyb20gJ0AvdXRpbHMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1JvbGUnLA0KICBjb21wb25lbnRzOiB7DQoNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgLy8g6YGu572p5bGCDQogICAgICBsb2FkaW5nOiB0cnVlLA0KICAgICAgLy8g6YCJ5Lit5pWw57uEDQogICAgICBpZHM6IFtdLA0KICAgICAgLy8g6Z2e5Y2V5Liq56aB55SoDQogICAgICBzaW5nbGU6IHRydWUsDQogICAgICAvLyDpnZ7lpJrkuKrnpoHnlKgNCiAgICAgIG11bHRpcGxlOiB0cnVlLA0KICAgICAgLy8g5oC75p2h5pWwDQogICAgICB0b3RhbDogMCwNCiAgICAgIC8vIOinkuiJsuihqOagvOaVsOaNrg0KICAgICAgcm9sZUxpc3Q6IFtdLA0KICAgICAgbWVudUlkc0NoZWNrZWQ6IFtdLA0KICAgICAgLy8g5by55Ye65bGC5qCH6aKYDQogICAgICB0aXRsZTogJycsDQogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYINCiAgICAgIG9wZW46IGZhbHNlLA0KICAgICAgLy8g5piv5ZCm5pi+56S65by55Ye65bGC77yI5pWw5o2u5p2D6ZmQ77yJDQogICAgICBvcGVuRGF0YVNjb3BlOiBmYWxzZSwNCiAgICAgIGlzRWRpdDogZmFsc2UsDQogICAgICAvLyDml6XmnJ/ojIPlm7QNCiAgICAgIGRhdGVSYW5nZTogW10sDQogICAgICAvLyDnirbmgIHmlbDmja7lrZflhbgNCiAgICAgIHN0YXR1c09wdGlvbnM6IFtdLA0KICAgICAgLy8g5pWw5o2u6IyD5Zu06YCJ6aG5DQogICAgICBkYXRhU2NvcGVPcHRpb25zOiBbDQogICAgICAgIHsNCiAgICAgICAgICB2YWx1ZTogJzEnLA0KICAgICAgICAgIGxhYmVsOiAn5YWo6YOo5pWw5o2u5p2D6ZmQJw0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdmFsdWU6ICcyJywNCiAgICAgICAgICBsYWJlbDogJ+iHquWumuaVsOaNruadg+mZkCcNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHZhbHVlOiAnMycsDQogICAgICAgICAgbGFiZWw6ICfmnKzpg6jpl6jmlbDmja7mnYPpmZAnDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB2YWx1ZTogJzQnLA0KICAgICAgICAgIGxhYmVsOiAn5pys6YOo6Zeo5Y+K5Lul5LiL5pWw5o2u5p2D6ZmQJw0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdmFsdWU6ICc1JywNCiAgICAgICAgICBsYWJlbDogJ+S7heacrOS6uuaVsOaNruadg+mZkCcNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIC8vIOiPnOWNleWIl+ihqA0KICAgICAgbWVudU9wdGlvbnM6IFtdLA0KICAgICAgbWVudUxpc3Q6IFtdLA0KICAgICAgLy8g6YOo6Zeo5YiX6KGoDQogICAgICBkZXB0T3B0aW9uczogW10sDQogICAgICBtZW51T3B0aW9uc0FsZXJ0OiAn5Yqg6L295Lit77yM6K+356iN5ZCOJywNCiAgICAgIC8vIOafpeivouWPguaVsA0KICAgICAgcXVlcnlQYXJhbXM6IHsNCiAgICAgICAgcGFnZUluZGV4OiAxLA0KICAgICAgICBwYWdlU2l6ZTogMTAsDQogICAgICAgIHJvbGVOYW1lOiB1bmRlZmluZWQsDQogICAgICAgIHJvbGVLZXk6IHVuZGVmaW5lZCwNCiAgICAgICAgc3RhdHVzOiB1bmRlZmluZWQNCiAgICAgIH0sDQogICAgICAvLyDooajljZXlj4LmlbANCiAgICAgIGZvcm06IHsNCiAgICAgICAgc3lzTWVudTogW10NCiAgICAgIH0sDQogICAgICBkZWZhdWx0UHJvcHM6IHsNCiAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicsDQogICAgICAgIGxhYmVsOiAnbGFiZWwnDQogICAgICB9LA0KICAgICAgLy8g6KGo5Y2V5qCh6aqMDQogICAgICBydWxlczogew0KICAgICAgICByb2xlTmFtZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfop5LoibLlkI3np7DkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfQ0KICAgICAgICBdLA0KICAgICAgICByb2xlS2V5OiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+adg+mZkOWtl+espuS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0sDQogICAgICAgIHJvbGVTb3J0OiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+inkuiJsumhuuW6j+S4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9DQogICAgICAgIF0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRMaXN0KCkNCiAgICB0aGlzLmdldE1lbnVUcmVlc2VsZWN0KCkNCiAgICB0aGlzLmdldERpY3RzKCdzeXNfbm9ybWFsX2Rpc2FibGUnKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgIHRoaXMuc3RhdHVzT3B0aW9ucyA9IHJlc3BvbnNlLmRhdGENCiAgICB9KQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLyoqIOafpeivouinkuiJsuWIl+ihqCAqLw0KICAgIGdldExpc3QoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgICBsaXN0Um9sZSh0aGlzLmFkZERhdGVSYW5nZSh0aGlzLnF1ZXJ5UGFyYW1zLCB0aGlzLmRhdGVSYW5nZSkpLnRoZW4oDQogICAgICAgIHJlc3BvbnNlID0+IHsNCiAgICAgICAgICB0aGlzLnJvbGVMaXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0DQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEuY291bnQNCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICB9DQogICAgICApDQogICAgfSwNCiAgICAvKiog5p+l6K+i6I+c5Y2V5qCR57uT5p6EICovDQogICAgZ2V0TWVudVRyZWVzZWxlY3QoKSB7DQogICAgICByb2xlTWVudVRyZWVzZWxlY3QoMCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMubWVudU9wdGlvbnMgPSByZXNwb25zZS5kYXRhLm1lbnVzDQogICAgICAgIHRoaXMubWVudUxpc3QgPSB0aGlzLm1lbnVPcHRpb25zDQogICAgICB9KQ0KICAgIH0sDQogICAgLyoqIOafpeivoumDqOmXqOagkee7k+aehCAqLw0KICAgIGdldERlcHRUcmVlc2VsZWN0KCkgew0KICAgICAgZGVwdFRyZWVzZWxlY3QoKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5kZXB0T3B0aW9ucyA9IHJlc3BvbnNlLmRhdGEubGlzdA0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOaJgOacieiPnOWNleiKgueCueaVsOaNrg0KICAgIGdldE1lbnVBbGxDaGVja2VkS2V5cygpIHsNCiAgICAgIC8vIOebruWJjeiiq+mAieS4reeahOiPnOWNleiKgueCuQ0KICAgICAgY29uc3QgY2hlY2tlZEtleXMgPSB0aGlzLiRyZWZzLm1lbnVUcmVlLmdldEhhbGZDaGVja2VkS2V5cygpDQogICAgICBjb25zb2xlLmxvZygn55uu5YmN6KKr6YCJ5Lit55qE6I+c5Y2V6IqC54K5JywgY2hlY2tlZEtleXMpDQogICAgICAvLyDljYrpgInkuK3nmoToj5zljZXoioLngrkNCiAgICAgIGNvbnN0IGhhbGZDaGVja2VkS2V5cyA9IHRoaXMuJHJlZnMubWVudVRyZWUuZ2V0Q2hlY2tlZEtleXMoKQ0KICAgICAgY29uc29sZS5sb2coJ+WNiumAieS4reeahOiPnOWNleiKgueCuScsIGhhbGZDaGVja2VkS2V5cykNCiAgICAgIC8vIGNoZWNrZWRLZXlzLnVuc2hpZnQuYXBwbHkoY2hlY2tlZEtleXMsIGhhbGZDaGVja2VkS2V5cykNCiAgICAgIHJldHVybiBoYWxmQ2hlY2tlZEtleXMNCiAgICB9LA0KICAgIC8vIOaJgOaciemDqOmXqOiKgueCueaVsOaNrg0KICAgIGdldERlcHRBbGxDaGVja2VkS2V5cygpIHsNCiAgICAgIC8vIOebruWJjeiiq+mAieS4reeahOmDqOmXqOiKgueCuQ0KICAgICAgY29uc3QgY2hlY2tlZEtleXMgPSB0aGlzLiRyZWZzLmRlcHQuZ2V0Q2hlY2tlZEtleXMoKQ0KICAgICAgLy8g5Y2K6YCJ5Lit55qE6YOo6Zeo6IqC54K5DQogICAgICAvLyBjb25zdCBoYWxmQ2hlY2tlZEtleXMgPSB0aGlzLiRyZWZzLmRlcHQuZ2V0Q2hlY2tlZEtleXMoKQ0KICAgICAgLy8gY2hlY2tlZEtleXMudW5zaGlmdC5hcHBseShjaGVja2VkS2V5cywgaGFsZkNoZWNrZWRLZXlzKQ0KICAgICAgcmV0dXJuIGNoZWNrZWRLZXlzDQogICAgfSwNCiAgICAvKiog5qC55o2u6KeS6ImySUTmn6Xor6Loj5zljZXmoJHnu5PmnoQgKi8NCiAgICBnZXRSb2xlTWVudVRyZWVzZWxlY3Qocm93LCBjaGVja2VkS2V5cykgew0KICAgICAgaWYgKHJvdy5yb2xlS2V5ID09PSAnYWRtaW4nKSB7DQogICAgICAgIHRoaXMubWVudU9wdGlvbnNBbGVydCA9ICfns7vnu5/otoXnuqfnrqHnkIblkZjml6DpnIDmraTmk43kvZwnDQogICAgICAgIHRoaXMubWVudU9wdGlvbnMgPSBbXQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHRoaXMuJHJlZnMubWVudVRyZWUuc2V0Q2hlY2tlZEtleXMoY2hlY2tlZEtleXMpDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICAvKiog5qC55o2u6KeS6ImySUTmn6Xor6Lpg6jpl6jmoJHnu5PmnoQgKi8NCiAgICBnZXRSb2xlRGVwdFRyZWVzZWxlY3Qocm9sZUlkKSB7DQogICAgICByb2xlRGVwdFRyZWVzZWxlY3Qocm9sZUlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgdGhpcy5kZXB0T3B0aW9ucyA9IHJlc3BvbnNlLmRhdGEuZGVwdHMNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHRoaXMuJHJlZnMuZGVwdC5zZXRDaGVja2VkS2V5cyhyZXNwb25zZS5kYXRhLmNoZWNrZWRLZXlzKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOinkuiJsueKtuaAgeS/ruaUuQ0KICAgIGhhbmRsZVN0YXR1c0NoYW5nZShyb3cpIHsNCiAgICAgIGNvbnN0IHRleHQgPSByb3cuc3RhdHVzID09PSAnMicgPyAn5ZCv55SoJyA6ICflgZznlKgnDQogICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTopoEiJyArIHRleHQgKyAnIiInICsgcm93LnJvbGVOYW1lICsgJyLop5LoibLlkJc/JywgJ+itpuWRiicsIHsNCiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnDQogICAgICB9KS50aGVuKGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gY2hhbmdlUm9sZVN0YXR1cyhyb3cucm9sZUlkLCByb3cuc3RhdHVzKQ0KICAgICAgfSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpDQogICAgICAgIHRoaXMubXNnU3VjY2VzcyhyZXMubXNnKQ0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oKSB7DQogICAgICAgIHJvdy5zdGF0dXMgPSByb3cuc3RhdHVzID09PSAnMicgPyAnMScgOiAnMicNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDlj5bmtojmjInpkq4NCiAgICBjYW5jZWwoKSB7DQogICAgICB0aGlzLm9wZW4gPSBmYWxzZQ0KICAgICAgdGhpcy5yZXNldCgpDQogICAgfSwNCiAgICAvLyDlj5bmtojmjInpkq7vvIjmlbDmja7mnYPpmZDvvIkNCiAgICBjYW5jZWxEYXRhU2NvcGUoKSB7DQogICAgICB0aGlzLm9wZW5EYXRhU2NvcGUgPSBmYWxzZQ0KICAgICAgdGhpcy5yZXNldCgpDQogICAgfSwNCiAgICAvLyDooajljZXph43nva4NCiAgICByZXNldCgpIHsNCiAgICAgIHRoaXMubWVudU9wdGlvbnMgPSB0aGlzLm1lbnVMaXN0DQogICAgICBpZiAodGhpcy4kcmVmcy5tZW51VHJlZSAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHRoaXMuJHJlZnMubWVudVRyZWUuc2V0Q2hlY2tlZEtleXMoW10pDQogICAgICB9DQogICAgICB0aGlzLmZvcm0gPSB7DQogICAgICAgIHJvbGVJZDogdW5kZWZpbmVkLA0KICAgICAgICByb2xlTmFtZTogdW5kZWZpbmVkLA0KICAgICAgICByb2xlS2V5OiB1bmRlZmluZWQsDQogICAgICAgIHJvbGVTb3J0OiAwLA0KICAgICAgICBzdGF0dXM6ICcyJywNCiAgICAgICAgbWVudUlkczogW10sDQogICAgICAgIGRlcHRJZHM6IFtdLA0KICAgICAgICBzeXNNZW51OiBbXSwNCiAgICAgICAgcmVtYXJrOiB1bmRlZmluZWQNCiAgICAgIH0NCiAgICAgIHRoaXMucmVzZXRGb3JtKCdmb3JtJykNCiAgICB9LA0KICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVRdWVyeSgpIHsNCiAgICAgIHRoaXMucXVlcnlQYXJhbXMucGFnZUluZGV4ID0gMQ0KICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICB9LA0KICAgIC8qKiDph43nva7mjInpkq7mk43kvZwgKi8NCiAgICByZXNldFF1ZXJ5KCkgew0KICAgICAgdGhpcy5kYXRlUmFuZ2UgPSBbXQ0KICAgICAgdGhpcy5yZXNldEZvcm0oJ3F1ZXJ5Rm9ybScpDQogICAgICB0aGlzLmhhbmRsZVF1ZXJ5KCkNCiAgICB9LA0KICAgIC8vIOWkmumAieahhumAieS4reaVsOaNrg0KICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShzZWxlY3Rpb24pIHsNCiAgICAgIHRoaXMuaWRzID0gc2VsZWN0aW9uLm1hcChpdGVtID0+IGl0ZW0ucm9sZUlkKQ0KICAgICAgdGhpcy5zaW5nbGUgPSBzZWxlY3Rpb24ubGVuZ3RoICE9PSAxDQogICAgICB0aGlzLm11bHRpcGxlID0gIXNlbGVjdGlvbi5sZW5ndGgNCiAgICB9LA0KICAgIC8qKiDmlrDlop7mjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVBZGQoKSB7DQogICAgICB0aGlzLnJlc2V0KCkNCiAgICAgIC8vIHRoaXMuZ2V0TWVudVRyZWVzZWxlY3QoMCkNCiAgICAgIHRoaXMub3BlbiA9IHRydWUNCiAgICAgIHRoaXMudGl0bGUgPSAn5re75Yqg6KeS6ImyJw0KICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZQ0KICAgIH0sDQogICAgaGFuZGxlU29ydENoYW5nKGNvbHVtbiwgcHJvcCwgb3JkZXIpIHsNCiAgICAgIHByb3AgPSBjb2x1bW4ucHJvcA0KICAgICAgb3JkZXIgPSBjb2x1bW4ub3JkZXINCiAgICAgIGlmIChvcmRlciA9PT0gJ2Rlc2NlbmRpbmcnKSB7DQogICAgICAgIHRoaXMucXVlcnlQYXJhbXNbcHJvcCArICdPcmRlciddID0gJ2Rlc2MnDQogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnYXNjZW5kaW5nJykgew0KICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zW3Byb3AgKyAnT3JkZXInXSA9ICdhc2MnDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnF1ZXJ5UGFyYW1zW3Byb3AgKyAnT3JkZXInXSA9IHVuZGVmaW5lZA0KICAgICAgfQ0KICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICB9LA0KICAgIC8qKiDkv67mlLnmjInpkq7mk43kvZwgKi8NCiAgICBoYW5kbGVVcGRhdGUocm93KSB7DQogICAgICB0aGlzLm1lbnVJZHNDaGVja2VkID0gW10NCiAgICAgIHRoaXMucmVzZXQoKQ0KICAgICAgY29uc3Qgcm9sZUlkID0gcm93LnJvbGVJZCB8fCB0aGlzLmlkcw0KICAgICAgZ2V0Um9sZShyb2xlSWQpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICB0aGlzLmZvcm0gPSByZXNwb25zZS5kYXRhDQogICAgICAgIHRoaXMubWVudUlkc0NoZWNrZWQgPSByZXNwb25zZS5kYXRhLm1lbnVJZHMNCiAgICAgICAgdGhpcy50aXRsZSA9ICfkv67mlLnop5LoibInDQogICAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZQ0KICAgICAgICB0aGlzLm9wZW4gPSB0cnVlDQogICAgICAgIHRoaXMuZ2V0Um9sZU1lbnVUcmVlc2VsZWN0KHJvdywgcmVzcG9uc2UuZGF0YS5tZW51SWRzKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDliIbphY3mlbDmja7mnYPpmZDmk43kvZwgKi8NCiAgICBoYW5kbGVEYXRhU2NvcGUocm93KSB7DQogICAgICB0aGlzLnJlc2V0KCkNCiAgICAgIGdldFJvbGUocm93LnJvbGVJZCkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgIHRoaXMuZm9ybSA9IHJlc3BvbnNlLmRhdGENCiAgICAgICAgdGhpcy5vcGVuRGF0YVNjb3BlID0gdHJ1ZQ0KICAgICAgICB0aGlzLnRpdGxlID0gJ+WIhumFjeaVsOaNruadg+mZkCcNCiAgICAgICAgdGhpcy5nZXRSb2xlRGVwdFRyZWVzZWxlY3Qocm93LnJvbGVJZCkNCiAgICAgIH0pDQogICAgfSwNCiAgICAvKiog5o+Q5Lqk5oyJ6ZKuICovDQogICAgc3VibWl0Rm9ybTogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLiRyZWZzWydmb3JtJ10udmFsaWRhdGUodmFsaWQgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBpZiAodGhpcy5mb3JtLnJvbGVJZCAhPT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICB0aGlzLmZvcm0ubWVudUlkcyA9IHRoaXMuZ2V0TWVudUFsbENoZWNrZWRLZXlzKCkNCiAgICAgICAgICAgIHVwZGF0ZVJvbGUodGhpcy5mb3JtLCB0aGlzLmZvcm0ucm9sZUlkKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMubXNnU3VjY2VzcyhyZXNwb25zZS5tc2cpDQogICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMubXNnRXJyb3IocmVzcG9uc2UubXNnKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLmZvcm0ubWVudUlkcyA9IHRoaXMuZ2V0TWVudUFsbENoZWNrZWRLZXlzKCkNCiAgICAgICAgICAgIGFkZFJvbGUodGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgIHRoaXMubXNnU3VjY2VzcyhyZXNwb25zZS5tc2cpDQogICAgICAgICAgICAgICAgdGhpcy5vcGVuID0gZmFsc2UNCiAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKQ0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMubXNnRXJyb3IocmVzcG9uc2UubXNnKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8qKiDmj5DkuqTmjInpkq7vvIjmlbDmja7mnYPpmZDvvIkgKi8NCiAgICBzdWJtaXREYXRhU2NvcGU6IGZ1bmN0aW9uKCkgew0KICAgICAgaWYgKHRoaXMuZm9ybS5yb2xlSWQgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICB0aGlzLmZvcm0uZGVwdElkcyA9IHRoaXMuZ2V0RGVwdEFsbENoZWNrZWRLZXlzKCkNCiAgICAgICAgY29uc29sZS5sb2codGhpcy5nZXREZXB0QWxsQ2hlY2tlZEtleXMoKSkNCiAgICAgICAgZGF0YVNjb3BlKHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKHJlc3BvbnNlLm1zZykNCiAgICAgICAgICAgIHRoaXMub3BlbkRhdGFTY29wZSA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLmdldExpc3QoKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLm1zZ0Vycm9yKHJlc3BvbnNlLm1zZykNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICAvKiog5Yig6Zmk5oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlRGVsZXRlKHJvdykgew0KICAgICAgY29uc3Qgcm9sZUlkcyA9IChyb3cucm9sZUlkICYmIFtyb3cucm9sZUlkXSkgfHwgdGhpcy5pZHMNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOWIoOmZpOinkuiJsue8luWPt+S4uiInICsgcm9sZUlkcyArICci55qE5pWw5o2u6aG5PycsICforablkYonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkudGhlbihmdW5jdGlvbigpIHsNCiAgICAgICAgcmV0dXJuIGRlbFJvbGUoeyAnaWRzJzogcm9sZUlkcyB9KQ0KICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy5nZXRMaXN0KCkNCiAgICAgICAgdGhpcy5tc2dTdWNjZXNzKHJlc3BvbnNlLm1zZykNCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKCkge30pDQogICAgfSwNCiAgICAvKiog5a+85Ye65oyJ6ZKu5pON5L2cICovDQogICAgaGFuZGxlRXhwb3J0KCkgew0KICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5a+85Ye65omA5pyJ6KeS6Imy5pWw5o2u6aG5PycsICforablkYonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuZG93bmxvYWRMb2FkaW5nID0gdHJ1ZQ0KICAgICAgICBpbXBvcnQoJ0AvdmVuZG9yL0V4cG9ydDJFeGNlbCcpLnRoZW4oZXhjZWwgPT4gew0KICAgICAgICAgIGNvbnN0IHRIZWFkZXIgPSBbJ+inkuiJsue8luWPtycsICfop5LoibLlkI3np7AnLCAn5p2D6ZmQ5a2X56ymJywgJ+aYvuekuumhuuW6jycsICfnirbmgIEnLCAn5Yib5bu65pe26Ze0J10NCiAgICAgICAgICBjb25zdCBmaWx0ZXJWYWwgPSBbJ3JvbGVJZCcsICdyb2xlTmFtZScsICdyb2xlS2V5JywgJ3JvbGVTb3J0JywgJ3N0YXR1cycsICdjcmVhdGVkQXQnXQ0KICAgICAgICAgIGNvbnN0IGxpc3QgPSB0aGlzLnJvbGVMaXN0DQogICAgICAgICAgY29uc3QgZGF0YSA9IGZvcm1hdEpzb24oZmlsdGVyVmFsLCBsaXN0KQ0KICAgICAgICAgIGV4Y2VsLmV4cG9ydF9qc29uX3RvX2V4Y2VsKHsNCiAgICAgICAgICAgIGhlYWRlcjogdEhlYWRlciwNCiAgICAgICAgICAgIGRhdGEsDQogICAgICAgICAgICBmaWxlbmFtZTogJ+inkuiJsueuoeeQhicsDQogICAgICAgICAgICBhdXRvV2lkdGg6IHRydWUsIC8vIE9wdGlvbmFsDQogICAgICAgICAgICBib29rVHlwZTogJ3hsc3gnIC8vIE9wdGlvbmFsDQogICAgICAgICAgfSkNCiAgICAgICAgICB0aGlzLmRvd25sb2FkTG9hZGluZyA9IGZhbHNlDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2PA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/admin/sys-role","sourcesContent":["<template>\r\n  <BasicLayout>\r\n    <template #wrapper>\r\n      <el-card class=\"box-card\">\r\n        <el-form ref=\"queryForm\" :model=\"queryParams\" :inline=\"true\">\r\n          <el-form-item label=\"名称\" prop=\"roleName\">\r\n            <el-input\r\n              v-model=\"queryParams.roleName\"\r\n              placeholder=\"请输入角色名称\"\r\n              clearable\r\n              size=\"small\"\r\n              style=\"width: 160px\"\r\n              @keyup.enter.native=\"handleQuery\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"权限字符\" prop=\"roleKey\">\r\n            <el-input\r\n              v-model=\"queryParams.roleKey\"\r\n              placeholder=\"请输入权限字符\"\r\n              clearable\r\n              size=\"small\"\r\n              style=\"width: 160px\"\r\n              @keyup.enter.native=\"handleQuery\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"状态\" prop=\"status\">\r\n            <el-select\r\n              v-model=\"queryParams.status\"\r\n              placeholder=\"角色状态\"\r\n              clearable\r\n              size=\"small\"\r\n              style=\"width: 160px\"\r\n            >\r\n              <el-option\r\n                v-for=\"dict in statusOptions\"\r\n                :key=\"dict.value\"\r\n                :label=\"dict.label\"\r\n                :value=\"dict.value\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          <!-- <el-form-item label=\"创建时间\">\r\n            <el-date-picker\r\n              v-model=\"dateRange\"\r\n              size=\"small\"\r\n              style=\"width: 240px\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              type=\"daterange\"\r\n              range-separator=\"-\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n            />\r\n          </el-form-item> -->\r\n          <el-form-item>\r\n            <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery\">搜索</el-button>\r\n            <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <el-row :gutter=\"10\" class=\"mb8\">\r\n          <el-col :span=\"1.5\">\r\n            <el-button\r\n              v-permisaction=\"['admin:sysRole:add']\"\r\n              type=\"primary\"\r\n              icon=\"el-icon-plus\"\r\n              size=\"mini\"\r\n              @click=\"handleAdd\"\r\n            >新增</el-button>\r\n          </el-col>\r\n          <el-col :span=\"1.5\">\r\n            <el-button\r\n              v-permisaction=\"['admin:sysRole:update']\"\r\n              type=\"success\"\r\n              icon=\"el-icon-edit\"\r\n              size=\"mini\"\r\n              :disabled=\"single\"\r\n              @click=\"handleUpdate\"\r\n            >修改</el-button>\r\n          </el-col>\r\n          <el-col :span=\"1.5\">\r\n            <el-button\r\n              v-permisaction=\"['admin:sysRole:remove']\"\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              :disabled=\"multiple\"\r\n              @click=\"handleDelete\"\r\n            >删除</el-button>\r\n          </el-col>\r\n          <el-col :span=\"1.5\">\r\n            <el-button\r\n              v-permisaction=\"['admin:sysRole:export']\"\r\n              type=\"warning\"\r\n              icon=\"el-icon-download\"\r\n              size=\"mini\"\r\n              @click=\"handleExport\"\r\n            >导出</el-button>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <el-table\r\n          v-loading=\"loading\"\r\n          :data=\"roleList\"\r\n          border\r\n          @selection-change=\"handleSelectionChange\"\r\n          @sort-change=\"handleSortChang\"\r\n        >\r\n          <el-table-column type=\"selection\" width=\"55\" align=\"center\" />\r\n          <el-table-column label=\"编码\" sortable=\"custom\" prop=\"roleId\" width=\"80\" />\r\n          <el-table-column label=\"名称\" sortable=\"custom\" prop=\"roleName\" :show-overflow-tooltip=\"true\" />\r\n          <el-table-column label=\"权限字符\" prop=\"roleKey\" :show-overflow-tooltip=\"true\" width=\"150\" />\r\n          <el-table-column label=\"排序\" sortable=\"custom\" prop=\"roleSort\" width=\"80\" />\r\n          <el-table-column label=\"状态\" sortable=\"custom\" width=\"80\">\r\n            <template slot-scope=\"scope\">\r\n              <el-switch\r\n                v-model=\"scope.row.status\"\r\n                active-value=\"2\"\r\n                inactive-value=\"1\"\r\n                @change=\"handleStatusChange(scope.row)\"\r\n              />\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"创建时间\" sortable=\"custom\" prop=\"createdAt\" width=\"160\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ parseTime(scope.row.createdAt) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            label=\"操作\"\r\n            align=\"left\"\r\n            class-name=\"small-padding fixed-width\"\r\n            width=\"220\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-button\r\n                v-permisaction=\"['admin:sysRole:update']\"\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                icon=\"el-icon-edit\"\r\n                @click=\"handleUpdate(scope.row)\"\r\n              >修改</el-button>\r\n              <el-button\r\n                v-permisaction=\"['admin:sysRole:update']\"\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                icon=\"el-icon-circle-check\"\r\n                @click=\"handleDataScope(scope.row)\"\r\n              >数据权限</el-button>\r\n              <el-button\r\n                v-if=\"scope.row.roleKey!=='admin'\"\r\n                v-permisaction=\"['admin:sysRole:remove']\"\r\n                size=\"mini\"\r\n                type=\"text\"\r\n                icon=\"el-icon-delete\"\r\n                @click=\"handleDelete(scope.row)\"\r\n              >删除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <pagination\r\n          v-show=\"total>0\"\r\n          :total=\"total\"\r\n          :page.sync=\"queryParams.pageIndex\"\r\n          :limit.sync=\"queryParams.pageSize\"\r\n          @pagination=\"getList\"\r\n        />\r\n\r\n        <!-- 添加或修改角色配置对话框 -->\r\n        <el-dialog v-if=\"open\" :title=\"title\" :visible.sync=\"open\" width=\"500px\">\r\n          <el-form ref=\"form\" :model=\"form\" :rules=\"rules\" label-width=\"80px\">\r\n            <el-form-item label=\"角色名称\" prop=\"roleName\">\r\n              <el-input v-model=\"form.roleName\" placeholder=\"请输入角色名称\" :disabled=\"isEdit\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"权限字符\" prop=\"roleKey\">\r\n              <el-input v-model=\"form.roleKey\" placeholder=\"请输入权限字符\" :disabled=\"isEdit\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"角色顺序\" prop=\"roleSort\">\r\n              <el-input-number v-model=\"form.roleSort\" controls-position=\"right\" :min=\"0\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"状态\">\r\n              <el-radio-group v-model=\"form.status\">\r\n                <el-radio\r\n                  v-for=\"dict in statusOptions\"\r\n                  :key=\"dict.value\"\r\n                  :label=\"dict.value\"\r\n                >{{ dict.label }}</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"菜单权限\">\r\n              <el-tree\r\n                ref=\"menuTree\"\r\n                :data=\"menuOptions\"\r\n                show-checkbox\r\n                node-key=\"id\"\r\n                :empty-text=\"menuOptionsAlert\"\r\n                style=\"height:171px;overflow-y:auto;overflow-x:hidden;\"\r\n              />\r\n            </el-form-item>\r\n            <el-form-item label=\"备注\">\r\n              <el-input v-model=\"form.remark\" type=\"textarea\" placeholder=\"请输入内容\" />\r\n            </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button type=\"primary\" @click=\"submitForm\">确 定</el-button>\r\n            <el-button @click=\"cancel\">取 消</el-button>\r\n          </div>\r\n        </el-dialog>\r\n\r\n        <!-- 分配角色数据权限对话框 -->\r\n        <el-dialog v-if=\"openDataScope\" :title=\"title\" :visible.sync=\"openDataScope\" width=\"500px\">\r\n          <el-form :model=\"form\" label-width=\"80px\">\r\n            <el-form-item label=\"角色名称\">\r\n              <el-input v-model=\"form.roleName\" :disabled=\"true\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"权限字符\">\r\n              <el-input v-model=\"form.roleKey\" :disabled=\"true\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"权限范围\">\r\n              <el-select v-model=\"form.dataScope\">\r\n                <el-option\r\n                  v-for=\"item in dataScopeOptions\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                />\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item v-show=\"form.dataScope == 2\" label=\"数据权限\">\r\n              <el-tree\r\n                ref=\"dept\"\r\n                :data=\"deptOptions\"\r\n                show-checkbox\r\n                default-expand-all\r\n                node-key=\"id\"\r\n                empty-text=\"加载中，请稍后\"\r\n                :props=\"defaultProps\"\r\n              />\r\n            </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button type=\"primary\" @click=\"submitDataScope\">确 定</el-button>\r\n            <el-button @click=\"cancelDataScope\">取 消</el-button>\r\n          </div>\r\n        </el-dialog>\r\n      </el-card>\r\n    </template>\r\n  </BasicLayout>\r\n</template>\r\n\r\n<script>\r\nimport { listRole, getRole, delRole, addRole, updateRole, dataScope, changeRoleStatus } from '@/api/admin/sys-role'\r\nimport { roleMenuTreeselect } from '@/api/admin/sys-menu'\r\nimport { treeselect as deptTreeselect, roleDeptTreeselect } from '@/api/admin/sys-dept'\r\nimport { formatJson } from '@/utils'\r\n\r\nexport default {\r\n  name: 'Role',\r\n  components: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      // 遮罩层\r\n      loading: true,\r\n      // 选中数组\r\n      ids: [],\r\n      // 非单个禁用\r\n      single: true,\r\n      // 非多个禁用\r\n      multiple: true,\r\n      // 总条数\r\n      total: 0,\r\n      // 角色表格数据\r\n      roleList: [],\r\n      menuIdsChecked: [],\r\n      // 弹出层标题\r\n      title: '',\r\n      // 是否显示弹出层\r\n      open: false,\r\n      // 是否显示弹出层（数据权限）\r\n      openDataScope: false,\r\n      isEdit: false,\r\n      // 日期范围\r\n      dateRange: [],\r\n      // 状态数据字典\r\n      statusOptions: [],\r\n      // 数据范围选项\r\n      dataScopeOptions: [\r\n        {\r\n          value: '1',\r\n          label: '全部数据权限'\r\n        },\r\n        {\r\n          value: '2',\r\n          label: '自定数据权限'\r\n        },\r\n        {\r\n          value: '3',\r\n          label: '本部门数据权限'\r\n        },\r\n        {\r\n          value: '4',\r\n          label: '本部门及以下数据权限'\r\n        },\r\n        {\r\n          value: '5',\r\n          label: '仅本人数据权限'\r\n        }\r\n      ],\r\n      // 菜单列表\r\n      menuOptions: [],\r\n      menuList: [],\r\n      // 部门列表\r\n      deptOptions: [],\r\n      menuOptionsAlert: '加载中，请稍后',\r\n      // 查询参数\r\n      queryParams: {\r\n        pageIndex: 1,\r\n        pageSize: 10,\r\n        roleName: undefined,\r\n        roleKey: undefined,\r\n        status: undefined\r\n      },\r\n      // 表单参数\r\n      form: {\r\n        sysMenu: []\r\n      },\r\n      defaultProps: {\r\n        children: 'children',\r\n        label: 'label'\r\n      },\r\n      // 表单校验\r\n      rules: {\r\n        roleName: [\r\n          { required: true, message: '角色名称不能为空', trigger: 'blur' }\r\n        ],\r\n        roleKey: [\r\n          { required: true, message: '权限字符不能为空', trigger: 'blur' }\r\n        ],\r\n        roleSort: [\r\n          { required: true, message: '角色顺序不能为空', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n    this.getMenuTreeselect()\r\n    this.getDicts('sys_normal_disable').then(response => {\r\n      this.statusOptions = response.data\r\n    })\r\n  },\r\n  methods: {\r\n    /** 查询角色列表 */\r\n    getList() {\r\n      this.loading = true\r\n      listRole(this.addDateRange(this.queryParams, this.dateRange)).then(\r\n        response => {\r\n          this.roleList = response.data.list\r\n          this.total = response.data.count\r\n          this.loading = false\r\n        }\r\n      )\r\n    },\r\n    /** 查询菜单树结构 */\r\n    getMenuTreeselect() {\r\n      roleMenuTreeselect(0).then(response => {\r\n        this.menuOptions = response.data.menus\r\n        this.menuList = this.menuOptions\r\n      })\r\n    },\r\n    /** 查询部门树结构 */\r\n    getDeptTreeselect() {\r\n      deptTreeselect().then(response => {\r\n        this.deptOptions = response.data.list\r\n      })\r\n    },\r\n    // 所有菜单节点数据\r\n    getMenuAllCheckedKeys() {\r\n      // 目前被选中的菜单节点\r\n      const checkedKeys = this.$refs.menuTree.getHalfCheckedKeys()\r\n      console.log('目前被选中的菜单节点', checkedKeys)\r\n      // 半选中的菜单节点\r\n      const halfCheckedKeys = this.$refs.menuTree.getCheckedKeys()\r\n      console.log('半选中的菜单节点', halfCheckedKeys)\r\n      // checkedKeys.unshift.apply(checkedKeys, halfCheckedKeys)\r\n      return halfCheckedKeys\r\n    },\r\n    // 所有部门节点数据\r\n    getDeptAllCheckedKeys() {\r\n      // 目前被选中的部门节点\r\n      const checkedKeys = this.$refs.dept.getCheckedKeys()\r\n      // 半选中的部门节点\r\n      // const halfCheckedKeys = this.$refs.dept.getCheckedKeys()\r\n      // checkedKeys.unshift.apply(checkedKeys, halfCheckedKeys)\r\n      return checkedKeys\r\n    },\r\n    /** 根据角色ID查询菜单树结构 */\r\n    getRoleMenuTreeselect(row, checkedKeys) {\r\n      if (row.roleKey === 'admin') {\r\n        this.menuOptionsAlert = '系统超级管理员无需此操作'\r\n        this.menuOptions = []\r\n      } else {\r\n        this.$nextTick(() => {\r\n          this.$refs.menuTree.setCheckedKeys(checkedKeys)\r\n        })\r\n      }\r\n    },\r\n    /** 根据角色ID查询部门树结构 */\r\n    getRoleDeptTreeselect(roleId) {\r\n      roleDeptTreeselect(roleId).then(response => {\r\n        this.deptOptions = response.data.depts\r\n        this.$nextTick(() => {\r\n          this.$refs.dept.setCheckedKeys(response.data.checkedKeys)\r\n        })\r\n      })\r\n    },\r\n    // 角色状态修改\r\n    handleStatusChange(row) {\r\n      const text = row.status === '2' ? '启用' : '停用'\r\n      this.$confirm('确认要\"' + text + '\"\"' + row.roleName + '\"角色吗?', '警告', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(function() {\r\n        return changeRoleStatus(row.roleId, row.status)\r\n      }).then((res) => {\r\n        console.log('res', res)\r\n        this.msgSuccess(res.msg)\r\n      }).catch(function() {\r\n        row.status = row.status === '2' ? '1' : '2'\r\n      })\r\n    },\r\n    // 取消按钮\r\n    cancel() {\r\n      this.open = false\r\n      this.reset()\r\n    },\r\n    // 取消按钮（数据权限）\r\n    cancelDataScope() {\r\n      this.openDataScope = false\r\n      this.reset()\r\n    },\r\n    // 表单重置\r\n    reset() {\r\n      this.menuOptions = this.menuList\r\n      if (this.$refs.menuTree !== undefined) {\r\n        this.$refs.menuTree.setCheckedKeys([])\r\n      }\r\n      this.form = {\r\n        roleId: undefined,\r\n        roleName: undefined,\r\n        roleKey: undefined,\r\n        roleSort: 0,\r\n        status: '2',\r\n        menuIds: [],\r\n        deptIds: [],\r\n        sysMenu: [],\r\n        remark: undefined\r\n      }\r\n      this.resetForm('form')\r\n    },\r\n    /** 搜索按钮操作 */\r\n    handleQuery() {\r\n      this.queryParams.pageIndex = 1\r\n      this.getList()\r\n    },\r\n    /** 重置按钮操作 */\r\n    resetQuery() {\r\n      this.dateRange = []\r\n      this.resetForm('queryForm')\r\n      this.handleQuery()\r\n    },\r\n    // 多选框选中数据\r\n    handleSelectionChange(selection) {\r\n      this.ids = selection.map(item => item.roleId)\r\n      this.single = selection.length !== 1\r\n      this.multiple = !selection.length\r\n    },\r\n    /** 新增按钮操作 */\r\n    handleAdd() {\r\n      this.reset()\r\n      // this.getMenuTreeselect(0)\r\n      this.open = true\r\n      this.title = '添加角色'\r\n      this.isEdit = false\r\n    },\r\n    handleSortChang(column, prop, order) {\r\n      prop = column.prop\r\n      order = column.order\r\n      if (order === 'descending') {\r\n        this.queryParams[prop + 'Order'] = 'desc'\r\n      } else if (order === 'ascending') {\r\n        this.queryParams[prop + 'Order'] = 'asc'\r\n      } else {\r\n        this.queryParams[prop + 'Order'] = undefined\r\n      }\r\n      this.getList()\r\n    },\r\n    /** 修改按钮操作 */\r\n    handleUpdate(row) {\r\n      this.menuIdsChecked = []\r\n      this.reset()\r\n      const roleId = row.roleId || this.ids\r\n      getRole(roleId).then(response => {\r\n        this.form = response.data\r\n        this.menuIdsChecked = response.data.menuIds\r\n        this.title = '修改角色'\r\n        this.isEdit = true\r\n        this.open = true\r\n        this.getRoleMenuTreeselect(row, response.data.menuIds)\r\n      })\r\n    },\r\n    /** 分配数据权限操作 */\r\n    handleDataScope(row) {\r\n      this.reset()\r\n      getRole(row.roleId).then(response => {\r\n        this.form = response.data\r\n        this.openDataScope = true\r\n        this.title = '分配数据权限'\r\n        this.getRoleDeptTreeselect(row.roleId)\r\n      })\r\n    },\r\n    /** 提交按钮 */\r\n    submitForm: function() {\r\n      this.$refs['form'].validate(valid => {\r\n        if (valid) {\r\n          if (this.form.roleId !== undefined) {\r\n            this.form.menuIds = this.getMenuAllCheckedKeys()\r\n            updateRole(this.form, this.form.roleId).then(response => {\r\n              if (response.code === 200) {\r\n                this.msgSuccess(response.msg)\r\n                this.open = false\r\n                this.getList()\r\n              } else {\r\n                this.msgError(response.msg)\r\n              }\r\n            })\r\n          } else {\r\n            this.form.menuIds = this.getMenuAllCheckedKeys()\r\n            addRole(this.form).then(response => {\r\n              if (response.code === 200) {\r\n                this.msgSuccess(response.msg)\r\n                this.open = false\r\n                this.getList()\r\n              } else {\r\n                this.msgError(response.msg)\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    /** 提交按钮（数据权限） */\r\n    submitDataScope: function() {\r\n      if (this.form.roleId !== undefined) {\r\n        this.form.deptIds = this.getDeptAllCheckedKeys()\r\n        console.log(this.getDeptAllCheckedKeys())\r\n        dataScope(this.form).then(response => {\r\n          if (response.code === 200) {\r\n            this.msgSuccess(response.msg)\r\n            this.openDataScope = false\r\n            this.getList()\r\n          } else {\r\n            this.msgError(response.msg)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    /** 删除按钮操作 */\r\n    handleDelete(row) {\r\n      const roleIds = (row.roleId && [row.roleId]) || this.ids\r\n      this.$confirm('是否确认删除角色编号为\"' + roleIds + '\"的数据项?', '警告', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(function() {\r\n        return delRole({ 'ids': roleIds })\r\n      }).then((response) => {\r\n        this.getList()\r\n        this.msgSuccess(response.msg)\r\n      }).catch(function() {})\r\n    },\r\n    /** 导出按钮操作 */\r\n    handleExport() {\r\n      this.$confirm('是否确认导出所有角色数据项?', '警告', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.downloadLoading = true\r\n        import('@/vendor/Export2Excel').then(excel => {\r\n          const tHeader = ['角色编号', '角色名称', '权限字符', '显示顺序', '状态', '创建时间']\r\n          const filterVal = ['roleId', 'roleName', 'roleKey', 'roleSort', 'status', 'createdAt']\r\n          const list = this.roleList\r\n          const data = formatJson(filterVal, list)\r\n          excel.export_json_to_excel({\r\n            header: tHeader,\r\n            data,\r\n            filename: '角色管理',\r\n            autoWidth: true, // Optional\r\n            bookType: 'xlsx' // Optional\r\n          })\r\n          this.downloadLoading = false\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}