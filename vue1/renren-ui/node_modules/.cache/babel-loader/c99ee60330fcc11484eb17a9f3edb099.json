{"remainingRequest":"/Users/yonghuizhu/Documents/project/SN/vue/renren-ui/node_modules/babel-loader/lib/index.js!/Users/yonghuizhu/Documents/project/SN/vue/renren-ui/src/utils/request.js","dependencies":[{"path":"/Users/yonghuizhu/Documents/project/SN/vue/renren-ui/src/utils/request.js","mtime":1656337398239},{"path":"/Users/yonghuizhu/Documents/project/SN/vue/renren-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yonghuizhu/Documents/project/SN/vue/renren-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMveW9uZ2h1aXpodS9Eb2N1bWVudHMvcHJvamVjdC9TTi92dWUvcmVucmVuLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBxcyBmcm9tICdxcyc7CmltcG9ydCB7IGNsZWFyTG9naW5JbmZvIH0gZnJvbSAnQC91dGlscyc7CmltcG9ydCBpc1BsYWluT2JqZWN0IGZyb20gJ2xvZGFzaC9pc1BsYWluT2JqZWN0JzsKdmFyIGh0dHAgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHdpbmRvdy5TSVRFX0NPTkZJR1snYXBpVVJMJ10sCiAgdGltZW91dDogMTAwMCAqIDE4MCwKICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKfSk7Ci8qKgogKiDor7fmsYLmi6bmiKoKICovCgpodHRwLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uZmlnLmhlYWRlcnNbJ0FjY2VwdC1MYW5ndWFnZSddID0gQ29va2llcy5nZXQoJ2xhbmd1YWdlJykgfHwgJ3poLUNOJzsKICBjb25maWcuaGVhZGVyc1sndG9rZW4nXSA9IENvb2tpZXMuZ2V0KCd0b2tlbicpIHx8ICcnOyAvLyDpu5jorqTlj4LmlbAKCiAgdmFyIGRlZmF1bHRzID0ge307IC8vIOmYsuatoue8k+WtmO+8jEdFVOivt+axgum7mOiupOW4pl905Y+C5pWwCgogIGlmIChjb25maWcubWV0aG9kID09PSAnZ2V0JykgewogICAgY29uZmlnLnBhcmFtcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY29uZmlnLnBhcmFtcyksIHsKICAgICAgJ190JzogbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgIH0pOwogIH0KCiAgaWYgKGlzUGxhaW5PYmplY3QoY29uZmlnLnBhcmFtcykpIHsKICAgIGNvbmZpZy5wYXJhbXMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRlZmF1bHRzKSwgY29uZmlnLnBhcmFtcyk7CiAgfQoKICBpZiAoaXNQbGFpbk9iamVjdChjb25maWcuZGF0YSkpIHsKICAgIGNvbmZpZy5kYXRhID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0cyksIGNvbmZpZy5kYXRhKTsKCiAgICBpZiAoL15hcHBsaWNhdGlvblwveC13d3ctZm9ybS11cmxlbmNvZGVkLy50ZXN0KGNvbmZpZy5oZWFkZXJzWydjb250ZW50LXR5cGUnXSkpIHsKICAgICAgY29uZmlnLmRhdGEgPSBxcy5zdHJpbmdpZnkoY29uZmlnLmRhdGEpOwogICAgfQogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7Ci8qKgogKiDlk43lupTmi6bmiKoKICovCgpodHRwLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gNDAxIHx8IHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMTAwMDEpIHsKICAgIGNsZWFyTG9naW5JbmZvKCk7CiAgICByb3V0ZXIucmVwbGFjZSh7CiAgICAgIG5hbWU6ICdsb2dpbicKICAgIH0pOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlLmRhdGEubXNnKTsKICB9CgogIHJldHVybiByZXNwb25zZTsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IGh0dHA7"},{"version":3,"sources":["/Users/yonghuizhu/Documents/project/SN/vue/renren-ui/src/utils/request.js"],"names":["axios","Cookies","router","qs","clearLoginInfo","isPlainObject","http","create","baseURL","window","SITE_CONFIG","timeout","withCredentials","interceptors","request","use","config","headers","get","defaults","method","params","Date","getTime","data","test","stringify","error","Promise","reject","response","code","replace","name","msg","console"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,cAAT,QAA+B,SAA/B;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AAEA,IAAMC,IAAI,GAAGN,KAAK,CAACO,MAAN,CAAa;AACxBC,EAAAA,OAAO,EAAEC,MAAM,CAACC,WAAP,CAAmB,QAAnB,CADe;AAExBC,EAAAA,OAAO,EAAE,OAAO,GAFQ;AAGxBC,EAAAA,eAAe,EAAE;AAHO,CAAb,CAAb;AAMA;;;;AAGAN,IAAI,CAACO,YAAL,CAAkBC,OAAlB,CAA0BC,GAA1B,CAA8B,UAAAC,MAAM,EAAI;AACtCA,EAAAA,MAAM,CAACC,OAAP,CAAe,iBAAf,IAAoChB,OAAO,CAACiB,GAAR,CAAY,UAAZ,KAA2B,OAA/D;AACAF,EAAAA,MAAM,CAACC,OAAP,CAAe,OAAf,IAA0BhB,OAAO,CAACiB,GAAR,CAAY,OAAZ,KAAwB,EAAlD,CAFsC,CAGtC;;AACA,MAAIC,QAAQ,GAAG,EAAf,CAJsC,CAKtC;;AACA,MAAIH,MAAM,CAACI,MAAP,KAAkB,KAAtB,EAA6B;AAC3BJ,IAAAA,MAAM,CAACK,MAAP,mCACKL,MAAM,CAACK,MADZ,GAEK;AAAE,YAAM,IAAIC,IAAJ,GAAWC,OAAX;AAAR,KAFL;AAID;;AACD,MAAIlB,aAAa,CAACW,MAAM,CAACK,MAAR,CAAjB,EAAkC;AAChCL,IAAAA,MAAM,CAACK,MAAP,mCACKF,QADL,GAEKH,MAAM,CAACK,MAFZ;AAID;;AACD,MAAIhB,aAAa,CAACW,MAAM,CAACQ,IAAR,CAAjB,EAAgC;AAC9BR,IAAAA,MAAM,CAACQ,IAAP,mCACKL,QADL,GAEKH,MAAM,CAACQ,IAFZ;;AAIA,QAAI,sCAAsCC,IAAtC,CAA2CT,MAAM,CAACC,OAAP,CAAe,cAAf,CAA3C,CAAJ,EAAgF;AAC9ED,MAAAA,MAAM,CAACQ,IAAP,GAAcrB,EAAE,CAACuB,SAAH,CAAaV,MAAM,CAACQ,IAApB,CAAd;AACD;AACF;;AACD,SAAOR,MAAP;AACD,CA5BD,EA4BG,UAAAW,KAAK,EAAI;AACV,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CA9BD;AAgCA;;;;AAGArB,IAAI,CAACO,YAAL,CAAkBiB,QAAlB,CAA2Bf,GAA3B,CAA+B,UAAAe,QAAQ,EAAI;AACzC,MAAIA,QAAQ,CAACN,IAAT,CAAcO,IAAd,KAAuB,GAAvB,IAA8BD,QAAQ,CAACN,IAAT,CAAcO,IAAd,KAAuB,KAAzD,EAAgE;AAC9D3B,IAAAA,cAAc;AACdF,IAAAA,MAAM,CAAC8B,OAAP,CAAe;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAf;AACA,WAAOL,OAAO,CAACC,MAAR,CAAeC,QAAQ,CAACN,IAAT,CAAcU,GAA7B,CAAP;AACD;;AACD,SAAOJ,QAAP;AACD,CAPD,EAOG,UAAAH,KAAK,EAAI;AACVQ,EAAAA,OAAO,CAACR,KAAR,CAAcA,KAAd;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAVD;AAYA,eAAerB,IAAf","sourcesContent":["import axios from 'axios'\nimport Cookies from 'js-cookie'\nimport router from '@/router'\nimport qs from 'qs'\nimport { clearLoginInfo } from '@/utils'\nimport isPlainObject from 'lodash/isPlainObject'\n\nconst http = axios.create({\n  baseURL: window.SITE_CONFIG['apiURL'],\n  timeout: 1000 * 180,\n  withCredentials: true\n})\n\n/**\n * 请求拦截\n */\nhttp.interceptors.request.use(config => {\n  config.headers['Accept-Language'] = Cookies.get('language') || 'zh-CN'\n  config.headers['token'] = Cookies.get('token') || ''\n  // 默认参数\n  var defaults = {}\n  // 防止缓存，GET请求默认带_t参数\n  if (config.method === 'get') {\n    config.params = {\n      ...config.params,\n      ...{ '_t': new Date().getTime() }\n    }\n  }\n  if (isPlainObject(config.params)) {\n    config.params = {\n      ...defaults,\n      ...config.params\n    }\n  }\n  if (isPlainObject(config.data)) {\n    config.data = {\n      ...defaults,\n      ...config.data\n    }\n    if (/^application\\/x-www-form-urlencoded/.test(config.headers['content-type'])) {\n      config.data = qs.stringify(config.data)\n    }\n  }\n  return config\n}, error => {\n  return Promise.reject(error)\n})\n\n/**\n * 响应拦截\n */\nhttp.interceptors.response.use(response => {\n  if (response.data.code === 401 || response.data.code === 10001) {\n    clearLoginInfo()\n    router.replace({ name: 'login' })\n    return Promise.reject(response.data.msg)\n  }\n  return response\n}, error => {\n  console.error(error)\n  return Promise.reject(error)\n})\n\nexport default http\n"]}]}